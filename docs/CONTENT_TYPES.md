# Content Type ç³»çµ±æ¶æ§‹

> **æ–‡ä»¶æ›´æ–°æ—¥æœŸ**ï¼š2025-12-26
> **ç›®çš„**ï¼šæè¿°ç›®å‰ç³»çµ±ä¸­èª²ç¨‹å…§å®¹é¡å‹çš„æ¶æ§‹

---

## 1. ContentType ç¸½è¦½

### 1.1 Enum å®šç¾©

**ä½ç½®**: `backend/models.py`

```python
class ContentType(str, enum.Enum):
    # Phase 1 - å•Ÿç”¨
    EXAMPLE_SENTENCES = "EXAMPLE_SENTENCES"  # ä¾‹å¥é›†

    # Phase 2 - é–‹ç™¼ä¸­
    VOCABULARY_SET = "VOCABULARY_SET"        # å–®å­—é›†

    # Phase 3 & 4 - æœªä¾†è¦åŠƒ
    MULTIPLE_CHOICE = "MULTIPLE_CHOICE"      # å–®é¸é¡Œåº«
    SCENARIO_DIALOGUE = "SCENARIO_DIALOGUE"  # æƒ…å¢ƒå°è©±

    # Legacy values - ä¿ç•™å‘å¾Œç›¸å®¹æ€§ï¼ˆdeprecatedï¼‰
    READING_ASSESSMENT = "READING_ASSESSMENT"  # @deprecated: use EXAMPLE_SENTENCES
    SENTENCE_MAKING = "SENTENCE_MAKING"        # @deprecated: use VOCABULARY_SET
```

### 1.2 ç›®å‰å•Ÿç”¨ç‹€æ…‹

| é¡å‹ | ä¸­æ–‡åç¨± | ç‹€æ…‹ | èªªæ˜ |
|------|---------|------|------|
| `EXAMPLE_SENTENCES` | ä¾‹å¥é›† | âœ… å•Ÿç”¨ | è½éŸ³æª”é‡çµ„å¥å­ / ä¾‹å¥æœ—è®€ç·´ç¿’ |
| `VOCABULARY_SET` | å–®å­—é›† | ğŸš§ Phase 2 | å–®å­—æœ—è®€ / å–®å­—é¸æ“‡ç·´ç¿’ |
| `MULTIPLE_CHOICE` | å–®é¸é¡Œåº« | â¸ï¸ Phase 3 | å–®é¸é¡Œåº« |
| `SCENARIO_DIALOGUE` | æƒ…å¢ƒå°è©± | â¸ï¸ Phase 4 | æƒ…å¢ƒå°è©±ç·´ç¿’ |

### 1.3 Legacy å€¼å°æ‡‰

| èˆŠå€¼ (Deprecated) | æ–°å€¼ |
|------------------|------|
| `READING_ASSESSMENT` | `EXAMPLE_SENTENCES` |
| `SENTENCE_MAKING` | `VOCABULARY_SET` |

> **æ³¨æ„**ï¼šæ–°ç¨‹å¼ç¢¼æ‡‰ä½¿ç”¨æ–°å€¼ï¼Œå¾Œç«¯çš„ `normalize_content_type()` æœƒè‡ªå‹•è½‰æ›èˆŠå€¼ã€‚

---

## 2. ä½œç­”æ¨¡å¼ (PracticeMode)

### 2.1 Enum å®šç¾©

```python
class PracticeMode(str, enum.Enum):
    """ä½œç­”æ¨¡å¼"""
    # ä¾‹å¥é›† (EXAMPLE_SENTENCES)
    READING = "reading"              # ä¾‹å¥æœ—è®€ -> å£èªªåˆ†é¡
    REARRANGEMENT = "rearrangement"  # ä¾‹å¥é‡çµ„ -> è½åŠ›/å¯«ä½œåˆ†é¡

    # å–®å­—é›† (VOCABULARY_SET) - Phase 2
    WORD_READING = "word_reading"    # å–®å­—æœ—è®€ -> å£èªªåˆ†é¡
    WORD_SELECTION = "word_selection"  # å–®å­—é¸æ“‡ -> è‰¾è³“æµ©æ–¯è¨˜æ†¶æ›²ç·š
```

### 2.2 åˆ†æ•¸åˆ†é¡å°æ‡‰

```python
class ScoreCategory(str, enum.Enum):
    """åˆ†æ•¸è¨˜éŒ„åˆ†é¡"""
    SPEAKING = "speaking"   # å£èªª
    LISTENING = "listening" # è½åŠ›
    WRITING = "writing"     # å¯«ä½œ
    VOCABULARY = "vocabulary"  # å–®å­—ï¼ˆæ–°å¢ï¼‰
```

| å…§å®¹é¡å‹ | ä½œç­”æ¨¡å¼ | æ’­æ”¾éŸ³æª” | è¨˜éŒ„è‡³åˆ†é¡ |
|---------|---------|---------|----------|
| ä¾‹å¥é›† | ä¾‹å¥æœ—è®€ (`reading`) | N/A | å£èªª (speaking) |
| ä¾‹å¥é›† | ä¾‹å¥é‡çµ„ (`rearrangement`) | âœ… æ˜¯ | è½åŠ› (listening) |
| ä¾‹å¥é›† | ä¾‹å¥é‡çµ„ (`rearrangement`) | âŒ å¦ | å¯«ä½œ (writing) |
| å–®å­—é›† | å–®å­—æœ—è®€ (`word_reading`) | é¸å¡« | å£èªª (speaking) |
| å–®å­—é›† | å–®å­—é¸æ“‡ (`word_selection`) | é¸å¡« | å–®å­— (vocabulary) |

---

## 3. EXAMPLE_SENTENCESï¼ˆä¾‹å¥é›†ï¼‰

### 3.1 åŠŸèƒ½æè¿°

æ•™å¸«å»ºç«‹ä¾‹å¥é›†ï¼Œå­¸ç”Ÿå¯é€éã€Œä¾‹å¥æœ—è®€ã€æˆ–ã€Œä¾‹å¥é‡çµ„ã€å…©ç¨®æ¨¡å¼ç·´ç¿’ã€‚

### 3.2 ContentItem æ¬„ä½ä½¿ç”¨

| æ¬„ä½ | ç”¨é€” | å¿…å¡« |
|------|------|------|
| `text` | ä¾‹å¥æ–‡æœ¬ï¼ˆè‹±æ–‡ï¼‰ | âœ… |
| `translation` | ä¸­æ–‡ç¿»è­¯ï¼ˆè¼”åŠ©ç†è§£ï¼‰ | é¸å¡« |
| `audio_url` | ä¾‹å¥éŸ³æª”ï¼ˆTTS ç”Ÿæˆï¼‰ | âœ… ä¾‹å¥é‡çµ„å¿…è¦ |

### 3.3 å…§å®¹å»ºç«‹è¦å‰‡

- **å­—æ•¸é™åˆ¶**: 2-25 å€‹è‹±æ–‡å–®å­—
- **è¨ˆç®—æ–¹å¼**: ä»¥ç©ºæ ¼åˆ†éš”çš„ token æ•¸é‡

### 3.4 ä½œæ¥­è¨­å®šé¸é …

| é¸é … | æ¬„ä½å | é¡å‹ | é è¨­å€¼ |
|-----|-------|------|--------|
| ä½œç­”æ¨¡å¼ | `practice_mode` | string | `reading` |
| æ¯é¡Œæ™‚é–“é™åˆ¶ | `time_limit_per_question` | int | 40 |
| æ‰“äº‚é¡Œç›®é †åº | `shuffle_questions` | bool | false |
| æ’­æ”¾éŸ³æª” | `play_audio` | bool | false |

### 3.5 ä¾‹å¥æœ—è®€è¨ˆåˆ†

ä½¿ç”¨ Azure Speech API é€²è¡Œ AI è©•åˆ†ï¼š

| ç¶­åº¦ | æ¬„ä½ | åˆ†æ•¸ç¯„åœ |
|------|------|---------|
| æº–ç¢ºç‡ | `accuracy_score` | 0-100 |
| æµæš¢åº¦ | `fluency_score` | 0-100 |
| ç™¼éŸ³ | `pronunciation_score` | 0-100 |

### 3.6 ä¾‹å¥é‡çµ„è¨ˆåˆ†

```
æ¯é¡Œç¸½åˆ† = 100 åˆ†
æ¯å€‹å–®å­—åˆ†æ•¸ = floor(100 / å¥å­å–®å­—æ•¸é‡)

éŒ¯èª¤æ¬¡æ•¸é™åˆ¶ï¼š
- 2-10 å€‹å–®å­—: 3 æ¬¡
- 11-25 å€‹å–®å­—: 5 æ¬¡
```

---

## 4. VOCABULARY_SETï¼ˆå–®å­—é›†ï¼‰- Phase 2

### 4.1 åŠŸèƒ½æè¿°

æ•™å¸«å»ºç«‹å–®å­—é›†ï¼Œå­¸ç”Ÿå¯é€éã€Œ**å–®å­—æœ—è®€**ã€æˆ–ã€Œ**å–®å­—é¸æ“‡**ã€å…©ç¨®æ¨¡å¼ç·´ç¿’ã€‚

#### ç·´ç¿’æ¨¡å¼æ¯”è¼ƒ

| æ¨¡å¼ | ä¸­æ–‡åç¨± | æ ¸å¿ƒåŠŸèƒ½ | è¨ˆåˆ†æ–¹å¼ | è€å¸«æ‰¹æ”¹ |
|------|---------|---------|---------|---------|
| `word_reading` | å–®å­—æœ—è®€ | å­¸ç”Ÿçœ‹å–®å­—ä¸¦æœ—è®€ | Azure Speech AI è©•åˆ† | âœ… éœ€è¦ |
| `word_selection` | å–®å­—é¸æ“‡ | çœ‹å–®å­—/è½éŸ³æª”é¸ç¿»è­¯ | è‰¾è³“æµ©æ–¯ç†Ÿæ‚‰åº¦ | âŒ ä¸éœ€è¦ |

### 4.2 ContentItem æ¬„ä½ä½¿ç”¨

| æ¬„ä½ | ç”¨é€” | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `text` | å–®å­—ï¼ˆè‹±æ–‡ï¼‰ | âœ… | ä¾‹ï¼šapple |
| `translation` | ä¸­æ–‡ç¿»è­¯ | âœ… | ä¾‹ï¼šè˜‹æœ |
| `audio_url` | å–®å­—éŸ³æª”ï¼ˆTTS ç”Ÿæˆï¼‰ | é¸å¡« | å–®å­—é¸æ“‡æ™‚å¯é¸æ“‡æ˜¯å¦æ’­æ”¾ |
| `image_url` | å–®å­—åœ–ç‰‡ | é¸å¡« | è¼”åŠ©è¨˜æ†¶ |
| `example_sentence` | ä¾‹å¥ | é¸å¡« | AI å¯ç”Ÿæˆ |
| `example_sentence_translation` | ä¾‹å¥ç¿»è­¯ | é¸å¡« | æ”¯æ´ä¸­/æ—¥/éŸ“ |
| `part_of_speech` | è©æ€§ | é¸å¡« | n., v., adj., adv., etc. |

### 4.3 å…§å®¹å»ºç«‹è¦å‰‡

#### æ‰¹æ¬¡è²¼ä¸Šæ ¼å¼
- æ¯ä¸€è¡Œæ˜¯ä¸€å€‹å–®å­—
- å¯é¸æ“‡æ‰¹æ¬¡ç”Ÿæˆï¼š
  - âœ… AI ç”Ÿæˆä¾‹å¥
  - âœ… AI ç”Ÿæˆä¾‹å¥ç¿»è­¯
  - âœ… ç”ŸæˆéŸ³æª” (TTS)
  - âœ… AI ç”Ÿæˆå–®å­—ç¿»è­¯
- æŒ‰éˆ•æ–‡æ¡ˆï¼šã€Œ**æ‰¹æ¬¡ç”ŸæˆéŸ³æª”**ã€(EN: "Generate Audio")

#### åœ–ç‰‡ä¸Šå‚³
- **Windows**: æˆªåœ–å¾Œåœ¨ input æ¬„ä½ Ctrl + V è²¼ä¸Š
- **Mac**: æˆªåœ–å¾Œå¯æ‹–æ›³é€²å…¥ input
- é è¨­æœ‰ä¸Šå‚³æŒ‰éˆ•å¯é»æ“Šä¸Šå‚³

### 4.4 ä½œæ¥­è¨­å®šé¸é …

| é¸é … | æ¬„ä½å | å–®å­—æœ—è®€ | å–®å­—é¸æ“‡ | é¡å‹ | é è¨­å€¼ |
|-----|-------|:-------:|:-------:|------|--------|
| é”æ¨™ç†Ÿæ‚‰åº¦ | `target_proficiency` | âŒ | âœ… | int | 80 |
| æ‰“äº‚é¡Œç›®é †åº | `shuffle_questions` | âœ… | âœ… | bool | false |
| é¡¯ç¤ºç¿»è­¯ | `show_translation` | âœ… | âŒ | bool | true |
| é¡¯ç¤ºå–®å­— | `show_word` | âŒ | âœ… | bool | true |
| é¡¯ç¤ºåœ–ç‰‡ | `show_image` | âœ… | âœ… | bool | true |
| æ’­æ”¾éŸ³æª” | `play_audio` | é¸å¡« | é¸å¡« | bool | false |

### 4.5 ä½œæ¥­ç‹€æ…‹æµç¨‹

#### å–®å­—æœ—è®€ï¼ˆéœ€è€å¸«æ‰¹æ”¹ï¼‰
```
å·²æŒ‡æ´¾ â†’ æœªé–‹å§‹ â†’ å·²é–‹å§‹ â†’ å·²æäº¤ â†’ å¾…è¨‚æ­£ â†’ å·²è¨‚æ­£ â†’ å·²å®Œæˆ
```

#### å–®å­—é¸æ“‡ï¼ˆè‡ªå‹•å®Œæˆï¼‰
```
å·²æŒ‡æ´¾ â†’ æœªé–‹å§‹ â†’ å·²é–‹å§‹ â†’ å·²å®Œæˆ
                          â†‘
                   ç†Ÿæ‚‰åº¦é”æ¨™è‡ªå‹•å®Œæˆ
```

### 4.6 å–®å­—æœ—è®€è¨ˆåˆ†

ä½¿ç”¨ Azure Speech API é€²è¡Œ AI è©•åˆ†ï¼ˆèˆ‡ä¾‹å¥æœ—è®€ç›¸åŒï¼‰ï¼š

| ç¶­åº¦ | æ¬„ä½ | åˆ†æ•¸ç¯„åœ |
|------|------|---------|
| æº–ç¢ºç‡ | `accuracy_score` | 0-100 |
| æµæš¢åº¦ | `fluency_score` | 0-100 |
| ç™¼éŸ³ | `pronunciation_score` | 0-100 |

#### éŒ„éŸ³é™åˆ¶
- **æœ€å¤§æ™‚é–“**: 5 ç§’
- **æœ€å°æ™‚é–“**: 0.01 ç§’
- **æª”æ¡ˆå¤§å°**: éœ€é™åˆ¶ï¼ˆå¾…ç¢ºèªå…·é«”å€¼ï¼‰

### 4.7 å–®å­—é¸æ“‡è¨ˆåˆ† - è‰¾è³“æµ©æ–¯è¨˜æ†¶æ›²ç·š

#### è¨˜æ†¶å¼·åº¦è¨ˆç®—å…¬å¼

åŸºæ–¼ [Ebbinghaus Forgetting Curve](https://en.wikipedia.org/wiki/Forgetting_curve):

```
R = e^(-t/S)
```

- **R**: è¨˜æ†¶ä¿æŒç‡ (0-1)
- **t**: è·ä¸Šæ¬¡è¤‡ç¿’ç¶“éçš„æ™‚é–“
- **S**: è¨˜æ†¶å¼·åº¦å¸¸æ•¸ï¼ˆèˆ‡ç†Ÿç·´ç¨‹åº¦æˆæ­£æ¯”ï¼‰

#### ç†Ÿæ‚‰åº¦æ›´æ–°è¦å‰‡

| å‹•ä½œ | ç†Ÿæ‚‰åº¦è®ŠåŒ– | èªªæ˜ |
|------|-----------|------|
| ç­”å° | +15~30% | æ ¹æ“šé€£çºŒç­”å°æ¬¡æ•¸éå¢ |
| ç­”éŒ¯ | é‡ç½®/é™ä½ | ç†Ÿæ‚‰åº¦é™ä½ï¼Œéœ€é‡æ–°ç·´ç¿’ |

#### é”æ¨™åˆ¤å®š

- **é è¨­é”æ¨™ç†Ÿæ‚‰åº¦**: 80%ï¼ˆè€å¸«å¯èª¿æ•´ï¼‰
- **å®Œæˆæ¢ä»¶**: æ‰€æœ‰å–®å­—çš„å¹³å‡ç†Ÿæ‚‰åº¦é”åˆ°è¨­å®šå€¼
- **å®Œæˆæµç¨‹**:
  1. é”æ¨™æ™‚è·³å‡ºæç¤ºè¦–çª—
  2. å­¸ç”Ÿå¯é¸æ“‡ã€Œé—œé–‰ã€æˆ–ã€Œç¹¼çºŒç·´ç¿’ã€
  3. ä½œæ¥­ç‹€æ…‹è‡ªå‹•æ›´æ–°ç‚ºã€Œå·²å®Œæˆã€

#### é¡Œå‹èªªæ˜

| é¡Œå‹ | èªªæ˜ | å¹²æ“¾é …ä¾†æº |
|------|------|----------|
| çœ‹è‹±æ–‡å–®å­—ï¼Œé¸ä¸­æ–‡ç¿»è­¯ | é¡¯ç¤º "apple"ï¼Œé¸ ã€Œè˜‹æœ/é¦™è•‰/æ©˜å­/è‘¡è„ã€ | AI ç”Ÿæˆèªç¾©ç›¸è¿‘è© |
| è½éŸ³æª”ï¼Œé¸ä¸­æ–‡ç¿»è­¯ | æ’­æ”¾ "apple" éŸ³æª”ï¼Œé¸ä¸­æ–‡ç¿»è­¯ | AI ç”Ÿæˆèªç¾©ç›¸è¿‘è© |

#### å¹²æ“¾é …ç”Ÿæˆè¦å‰‡

- **ä¾†æº**: AI è‡ªå‹•ç”Ÿæˆ
- **æ•¸é‡**: 3 å€‹å¹²æ“¾é … + 1 å€‹æ­£ç¢ºç­”æ¡ˆ = 4 é¸é …
- **ç­–ç•¥**:
  - èªç¾©ç›¸è¿‘ï¼ˆåŒé¡åˆ¥è©å½™ï¼‰
  - æ‹¼å¯«ç›¸ä¼¼ï¼ˆæ˜“æ··æ·†è©ï¼‰
  - åŒè©æ€§ï¼ˆåè©é…åè©ï¼‰

---

## 5. MULTIPLE_CHOICEï¼ˆå–®é¸é¡Œåº«ï¼‰- Phase 3

> â¸ï¸ **æœªä¾†è¦åŠƒ**ï¼šPhase 3 å¯¦ä½œ

### 5.1 åŠŸèƒ½æè¿°

æ•™å¸«å»ºç«‹å–®é¸é¡Œåº«ï¼Œå­¸ç”Ÿä½œç­”é¸æ“‡é¡Œã€‚

### 5.2 ContentItem æ¬„ä½ä½¿ç”¨ï¼ˆè¦åŠƒä¸­ï¼‰

| æ¬„ä½ | ç”¨é€” | å¿…å¡« |
|------|------|------|
| `question` | é¡Œç›®æ–‡æœ¬ | âœ… |
| `options` | é¸é …é™£åˆ— (JSON) | âœ… |
| `correct_answer` | æ­£ç¢ºç­”æ¡ˆç´¢å¼• | âœ… |
| `explanation` | è§£æèªªæ˜ | é¸å¡« |

---

## 6. SCENARIO_DIALOGUEï¼ˆæƒ…å¢ƒå°è©±ï¼‰- Phase 4

> â¸ï¸ **æœªä¾†è¦åŠƒ**ï¼šPhase 4 å¯¦ä½œ

### 6.1 åŠŸèƒ½æè¿°

æ•™å¸«å»ºç«‹æƒ…å¢ƒå°è©±ï¼Œå­¸ç”Ÿé€²è¡Œè§’è‰²æ‰®æ¼”å°è©±ç·´ç¿’ã€‚

---

## 7. è³‡æ–™åº«é—œè¯åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Assignment                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ practice_mode: VARCHAR(20)        -- 'reading'/'rearrangement'  â”‚
â”‚                                   -- 'word_reading'/'word_selection' â”‚
â”‚ time_limit_per_question: INTEGER  -- 10/20/30/40 ç§’             â”‚
â”‚ shuffle_questions: BOOLEAN        -- æ˜¯å¦æ‰“äº‚é †åº                â”‚
â”‚ play_audio: BOOLEAN               -- æ˜¯å¦æ’­æ”¾éŸ³æª”                â”‚
â”‚ show_translation: BOOLEAN         -- æ˜¯å¦é¡¯ç¤ºç¿»è­¯ï¼ˆå–®å­—é›†ï¼‰       â”‚
â”‚ show_word: BOOLEAN                -- æ˜¯å¦é¡¯ç¤ºå–®å­—ï¼ˆå–®å­—é¸æ“‡ï¼‰     â”‚
â”‚ show_image: BOOLEAN               -- æ˜¯å¦é¡¯ç¤ºåœ–ç‰‡ï¼ˆå–®å­—é›†ï¼‰       â”‚
â”‚ target_proficiency: INTEGER       -- é”æ¨™ç†Ÿæ‚‰åº¦ï¼ˆå–®å­—é¸æ“‡ï¼‰       â”‚
â”‚ score_category: VARCHAR(20)       -- åˆ†æ•¸è¨˜éŒ„åˆ†é¡                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ 1:M
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AssignmentContent (ä½œæ¥­-å…§å®¹æ˜ å°„)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ M:1
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Content (å…§å®¹)                              â”‚
â”‚  type: EXAMPLE_SENTENCES / VOCABULARY_SET / ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ 1:M
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ContentItem (é¡Œç›®)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€å…±ç”¨æ¬„ä½ã€‘                                                     â”‚
â”‚ - text: ä¾‹å¥/å–®å­—æ–‡æœ¬                                            â”‚
â”‚ - translation: ä¸­æ–‡ç¿»è­¯                                          â”‚
â”‚ - audio_url: éŸ³æª” URL                                           â”‚
â”‚                                                                  â”‚
â”‚ ã€ä¾‹å¥é›†å°ˆç”¨ã€‘                                                   â”‚
â”‚ - word_count: å–®å­—æ•¸é‡                                           â”‚
â”‚ - max_errors: å…è¨±éŒ¯èª¤æ¬¡æ•¸                                       â”‚
â”‚                                                                  â”‚
â”‚ ã€å–®å­—é›†å°ˆç”¨ã€‘                                                   â”‚
â”‚ - image_url: å–®å­—åœ–ç‰‡                                            â”‚
â”‚ - example_sentence: ä¾‹å¥                                         â”‚
â”‚ - example_sentence_translation: ä¾‹å¥ç¿»è­¯                         â”‚
â”‚ - part_of_speech: è©æ€§                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  StudentItemProgress (å­¸ç”Ÿé€²åº¦)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€æœ—è®€å°ˆç”¨ï¼ˆä¾‹å¥æœ—è®€ + å–®å­—æœ—è®€ï¼‰ã€‘                                â”‚
â”‚ - recording_url: éŒ„éŸ³æª”æ¡ˆ                                        â”‚
â”‚ - accuracy_score, fluency_score, pronunciation_score            â”‚
â”‚ - ai_feedback (JSON)                                            â”‚
â”‚                                                                  â”‚
â”‚ ã€é‡çµ„å°ˆç”¨ã€‘                                                     â”‚
â”‚ - error_count: éŒ¯èª¤æ¬¡æ•¸                                          â”‚
â”‚ - correct_word_count: å·²æ­£ç¢ºé¸æ“‡çš„å–®å­—æ•¸                          â”‚
â”‚ - expected_score: é æœŸåˆ†æ•¸                                       â”‚
â”‚                                                                  â”‚
â”‚ ã€è€å¸«æ‰¹æ”¹ã€‘                                                     â”‚
â”‚ - teacher_review_score, teacher_feedback, teacher_passed        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             UserWordProgress (å–®å­—è¨˜æ†¶é€²åº¦ - å–®å­—é¸æ“‡å°ˆç”¨)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - memory_strength: DECIMAL(5,4)   -- è¨˜æ†¶å¼·åº¦ (0-1)              â”‚
â”‚ - repetition_count: INTEGER       -- é€£çºŒç­”å°æ¬¡æ•¸                 â”‚
â”‚ - correct_count: INTEGER          -- ç´¯è¨ˆç­”å°æ¬¡æ•¸                 â”‚
â”‚ - incorrect_count: INTEGER        -- ç´¯è¨ˆç­”éŒ¯æ¬¡æ•¸                 â”‚
â”‚ - last_review_at: TIMESTAMPTZ     -- æœ€å¾Œè¤‡ç¿’æ™‚é–“                 â”‚
â”‚ - next_review_at: TIMESTAMPTZ     -- ä¸‹æ¬¡å»ºè­°è¤‡ç¿’æ™‚é–“             â”‚
â”‚ - easiness_factor: DECIMAL(3,2)   -- é›£æ˜“åº¦å› å­ (SM-2)            â”‚
â”‚ - interval_days: DECIMAL(10,2)    -- è¤‡ç¿’é–“éš”å¤©æ•¸                 â”‚
â”‚ - accuracy_rate: DECIMAL(5,4)     -- æ­£ç¢ºç‡                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. å‰ç«¯çµ„ä»¶å°æ‡‰

| å…§å®¹é¡å‹ | ä½œç­”æ¨¡å¼ | ä¸»è¦çµ„ä»¶ |
|---------|---------|---------|
| EXAMPLE_SENTENCES | reading | `ReadingAssessmentTemplate` |
| EXAMPLE_SENTENCES | rearrangement | `RearrangementActivity` |
| VOCABULARY_SET | word_reading | `WordReadingTemplate` (å¾…é–‹ç™¼) |
| VOCABULARY_SET | word_selection | `WordSelectionActivity` (å¾…é–‹ç™¼) |

---

## 9. API ç«¯é»ä¸€è¦½

### ä¾‹å¥æœ—è®€ç›¸é—œ

| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|------|------|------|
| `/api/students/assignments/{id}/activities` | GET | å–å¾—ä½œæ¥­æ´»å‹•åˆ—è¡¨ |
| `/api/students/upload-recording` | POST | ä¸Šå‚³éŒ„éŸ³æª” |
| `/api/speech/assess` | POST | AI èªéŸ³è©•åˆ† |
| `/api/students/assignments/{id}/submit` | POST | æäº¤ä½œæ¥­ |

### ä¾‹å¥é‡çµ„ç›¸é—œ

| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|------|------|------|
| `/api/students/assignments/{id}/rearrangement/start` | POST | é–‹å§‹é‡çµ„ç·´ç¿’ |
| `/api/students/assignments/{id}/submit-rearrangement` | POST | æäº¤é‡çµ„ç­”æ¡ˆ |
| `/api/students/assignments/{id}/items/{item_id}/retry` | POST | é‡æ–°æŒ‘æˆ° |

### å–®å­—é›†ç›¸é—œ (Phase 2 - å¾…é–‹ç™¼)

| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|------|------|------|
| `/api/students/assignments/{id}/vocabulary/start` | POST | é–‹å§‹å–®å­—ç·´ç¿’ |
| `/api/students/assignments/{id}/vocabulary/submit-reading` | POST | æäº¤å–®å­—æœ—è®€éŒ„éŸ³ |
| `/api/students/assignments/{id}/vocabulary/submit-selection` | POST | æäº¤å–®å­—é¸æ“‡ç­”æ¡ˆ |
| `/api/students/assignments/{id}/vocabulary/proficiency` | GET | å–å¾—ç†Ÿæ‚‰åº¦ç‹€æ…‹ |
| `/api/students/assignments/{id}/vocabulary/generate-distractors` | POST | AI ç”Ÿæˆå¹²æ“¾é … |

### å…§å®¹ç®¡ç†ç›¸é—œ (Phase 2 - å¾…é–‹ç™¼)

| ç«¯é» | æ–¹æ³• | ç”¨é€” |
|------|------|------|
| `/api/teachers/contents/vocabulary-set/batch-create` | POST | æ‰¹æ¬¡å»ºç«‹å–®å­— |
| `/api/teachers/contents/vocabulary-set/generate-audio` | POST | æ‰¹æ¬¡ç”ŸæˆéŸ³æª” |
| `/api/teachers/contents/vocabulary-set/generate-sentences` | POST | AI ç”Ÿæˆä¾‹å¥ |

---

## 10. å¯¦ä½œå„ªå…ˆé †åº

### Phase 2-1: å…§å®¹å»ºç«‹åŠŸèƒ½
1. âœ… ContentItem æ¬„ä½æ“´å…… (image_url, example_sentence, part_of_speech)
2. â¬œ æ‰¹æ¬¡è²¼ä¸ŠåŠŸèƒ½ï¼ˆæ¯è¡Œä¸€å€‹å–®å­—ï¼‰
3. â¬œ åœ–ç‰‡ä¸Šå‚³åŠŸèƒ½ï¼ˆè²¼ä¸Š/æ‹–æ›³/é»æ“Šä¸Šå‚³ï¼‰
4. â¬œ AI ç”Ÿæˆä¾‹å¥å’Œç¿»è­¯
5. â¬œ æ‰¹æ¬¡ç”ŸæˆéŸ³æª”

### Phase 2-2: å–®å­—æœ—è®€åŠŸèƒ½
1. â¬œ WordReadingTemplate çµ„ä»¶
2. â¬œ éŒ„éŸ³åŠŸèƒ½ï¼ˆmax 5s, min 0.01sï¼‰
3. â¬œ Azure Speech AI è©•åˆ†æ•´åˆ
4. â¬œ è€å¸«æ‰¹æ”¹ä»‹é¢

### Phase 2-3: å–®å­—é¸æ“‡åŠŸèƒ½
1. â¬œ WordSelectionActivity çµ„ä»¶
2. â¬œ AI å¹²æ“¾é …ç”Ÿæˆ
3. â¬œ è‰¾è³“æµ©æ–¯è¨˜æ†¶æ›²ç·šæ¼”ç®—æ³•
4. â¬œ ç†Ÿæ‚‰åº¦è¿½è¹¤èˆ‡é”æ¨™åˆ¤å®š

---

**æ–‡ä»¶ç‰ˆæœ¬**: v2.0
**å‰µå»ºæ—¥æœŸ**: 2025-12-09
**æœ€å¾Œæ›´æ–°**: 2025-12-26
**ä½œè€…**: Claude Code
**å¯©æ ¸ç‹€æ…‹**: å¾…å¯©æ ¸
