# 造句練習 UI 設計規格

**版本**: 1.0
**創建日期**: 2025-11-21
**作者**: Claude Code

---

## 📋 目錄

1. [功能概述](#功能概述)
2. [寫作模式 UI 設計](#寫作模式-ui-設計)
3. [聽力模式 UI 設計](#聽力模式-ui-設計)
4. [與朗讀評測的差異](#與朗讀評測的差異)
5. [測試檢查清單](#測試檢查清單)

---

## 功能概述

### 🎯 核心概念

**造句練習**是一個結合艾賓浩斯記憶曲線的英文學習系統，與朗讀評測完全不同：

| 特性 | 朗讀評測 | 造句練習 |
|------|---------|---------|
| **學習目標** | 練習發音和流暢度 | 記憶單字和句型 |
| **互動方式** | 錄音 + AI 評分 | 點擊單字組句 |
| **進度追蹤** | 單次作業完成度 | 艾賓浩斯記憶曲線 |
| **完成條件** | 錄音並提交 | 達到 90% 熟悉度 |
| **題目數量** | 固定（作業內容數） | 動態（智能選詞） |

---

## 寫作模式 UI 設計

### 📐 整體佈局

```
┌─────────────────────────────────────────────────────────────┐
│ 第 3 題 / 共 10 題                                    [30%] │ ← 進度條
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 📝 題目：請根據以下例句選擇正確的單字順序              │   │
│ │                                                       │   │
│ │ I eat an apple every day.                            │   │ ← 例句（大字）
│ │ 我每天吃一個蘋果。                                    │   │ ← 中文翻譯
│ │                                                       │   │
│ │ [🔊 播放音檔]  ← 選擇性顯示（如果有 audio_url）        │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 本題單字：apple  中文意思：蘋果                       │   │ ← 單字資訊
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ ✍️ 你的答案：                                               │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ ┌─────┐                 ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐    │   │
│ │ │  I  │  (已選單字)      │?│ │?│ │?│ │?│ │?│ │?│    │   │ ← 答案區（可點擊移除）
│ │ └─────┘                 └─┘ └─┘ └─┘ └─┘ └─┘ └─┘    │   │    + 空白提示框
│ │                                                       │   │
│ │ 已選擇 1 / 7 個單字                                   │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ 🎯 請選擇單字：                                             │
│ ┌──────┬──────┬──────┬──────┐                            │
│ │ eat  │ every│ day  │ an   │  ← 打亂的單字選項（2x4 grid）│
│ └──────┴──────┴──────┴──────┘                            │
│ ┌──────┬──────┬──────┐                                   │
│ │apple │  .   │      │                                   │
│ └──────┴──────┴──────┘                                   │
│                                                             │
│ 嘗試次數：3                                                 │
└─────────────────────────────────────────────────────────────┘
```

### 🎨 視覺設計細節

#### 1. 進度條區域
- **位置**: 最上方
- **內容**:
  - 左側：`第 X 題 / 共 10 題`（灰色文字）
  - 右側：百分比 `30%`（藍色）
- **進度條**:
  - 高度 8px
  - 藍色填充
  - 圓角

#### 2. 題目區（藍色背景）
- **背景**: `bg-blue-50`
- **邊框**: `border-2 border-blue-200`
- **圓角**: `rounded-lg`
- **內邊距**: `p-6`
- **標題**:
  - 小字體 `text-xs`
  - 深藍色 `text-blue-900`
  - 圖標 📝
- **例句**:
  - 大字體 `text-lg` 或 `text-2xl`
  - 黑色 `text-gray-900`
  - 粗體 `font-semibold`
- **中文翻譯**:
  - 中字體 `text-sm` 或 `text-lg`
  - 灰色 `text-gray-600`

#### 3. 單字資訊區（灰色背景）
- **背景**: `bg-gray-50`
- **佈局**: 橫向排列，中間分隔線
- **內容**:
  - `本題單字: apple`（藍色粗體）
  - `中文意思: 蘋果`（灰色）

#### 4. 答案區
- **標題**: `✍️ 你的答案：`
- **容器**:
  - 白色背景
  - 灰色邊框 `border-2 border-gray-300`
  - 最小高度 80px
  - Flex 佈局，gap-2
- **已選單字**:
  - 綠色背景 `bg-green-100`
  - 綠色邊框 `border-2 border-green-400`
  - 圓角 `rounded-lg`
  - 可點擊移除（hover 時變淺綠色）
- **空白框**:
  - 虛線邊框 `border-2 border-dashed border-gray-300`
  - 顯示 `?` 符號
  - 寬度 80px

#### 5. 單字選擇區
- **標題**: `🎯 請選擇單字：`
- **佈局**: Grid 2-4 columns（響應式）
  - 手機: 2 columns
  - 平板: 3 columns
  - 電腦: 4 columns
- **單字按鈕**:
  - 白色背景
  - 灰色邊框 `border-2 border-gray-300`
  - Hover: 藍色背景 `hover:bg-blue-50` + 藍色邊框
  - Active: 縮小效果 `active:scale-95`
  - 圓角 `rounded-lg`
  - 內邊距 `px-4 py-3`

### 🔄 互動流程

#### 初始狀態
1. 顯示例句和中文翻譯
2. 答案區為空，顯示 7 個空白框（依例句長度）
3. 單字選擇區顯示 7 個打亂的單字

#### 點擊單字（正確）
1. 單字從選擇區**消失**
2. 單字出現在答案區**第一個空位**
3. 綠色背景淡入動畫
4. 嘗試次數 +1

#### 點擊單字（錯誤）
1. 單字**不移動**
2. Toast 提示：「這個單字的位置不對，再試試看！」（紅色）
3. 嘗試次數 +1

#### 完成題目
1. 所有單字都選對後
2. 顯示綠色成功提示框
3. 延遲 1.5 秒後**自動進入下一題**

#### 移除單字
1. 點擊答案區的已選單字
2. 單字回到選擇區
3. 答案區該位置及之後的單字都清空

---

## 聽力模式 UI 設計

### 📐 整體佈局

```
┌─────────────────────────────────────────────────────────────┐
│ 第 3 題 / 共 10 題                                    [30%] │ ← 進度條
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 🎧 聽力練習                                           │   │
│ │                                                       │   │
│ │ 🔊 [正在播放音檔...]                                  │   │ ← 自動播放提示
│ │                                                       │   │
│ │ 請仔細聆聽音檔，然後選擇正確的單字順序                  │   │
│ │                                                       │   │
│ │ ┌──────────────┐                                     │   │
│ │ │ 🔁 重播音檔   │  ← 可以重複播放                      │   │
│ │ └──────────────┘                                     │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 本題單字：apple  中文意思：蘋果                       │   │ ← 單字資訊
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ ✍️ 你的答案：                                               │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ ┌─────┐                 ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐    │   │
│ │ │  I  │  (已選單字)      │?│ │?│ │?│ │?│ │?│ │?│    │   │ ← 與寫作模式相同
│ │ └─────┘                 └─┘ └─┘ └─┘ └─┘ └─┘ └─┘    │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ 🎯 請選擇單字：                                             │
│ ┌──────┬──────┬──────┬──────┐                            │
│ │ eat  │ every│ day  │ an   │  ← 與寫作模式相同            │
│ └──────┴──────┴──────┴──────┘                            │
│ ┌──────┬──────┬──────┐                                   │
│ │apple │  .   │      │                                   │
│ └──────┴──────┴──────┘                                   │
└─────────────────────────────────────────────────────────────┘
```

### 🎨 與寫作模式的差異

| 元素 | 寫作模式 | 聽力模式 |
|------|---------|---------|
| **題目區背景** | 藍色 `bg-blue-50` | 紫色 `bg-purple-50` |
| **題目區邊框** | `border-blue-200` | `border-purple-200` |
| **標題圖標** | 📝 | 🎧 |
| **例句顯示** | ✅ 顯示完整例句 + 翻譯 | ❌ **不顯示**例句文字 |
| **音檔播放** | 選擇性（按鈕） | ✅ **自動播放** + 重播按鈕 |
| **提示文字** | "請根據以下例句..." | "請仔細聆聽音檔..." |

### 🔄 互動流程差異

#### 進入題目時
**寫作模式**:
- 直接顯示例句
- 不播放音檔

**聽力模式**:
- 顯示 Loading 圖標 🔊
- **自動播放音檔**
- 播放完成後可點擊重播

#### 音檔播放狀態
1. **播放中**:
   - 顯示 `🔊 正在播放音檔...`
   - Loading 動畫
2. **播放完成**:
   - 顯示提示文字
   - 啟用「重播音檔」按鈕

---

## 與朗讀評測的差異

### 🔍 關鍵差異對照表

| 特徵 | 朗讀評測 | 造句練習 |
|------|---------|---------|
| **主要元素** | 麥克風圖標、錄音按鈕、波形圖 | 單字選擇按鈕、答案區 |
| **互動方式** | 按住錄音 / 點擊錄音 | 點擊單字 |
| **視覺主色** | 紅色（錄音） | 藍色（寫作）/ 紫色（聽力） |
| **題目顯示** | 完整文本（不能互動） | 單字按鈕（可點擊） |
| **進度顯示** | 單一進度條 | 雙重進度（當前題 + 熟悉度） |
| **完成提示** | 提交按鈕 | 自動進入下一題 |
| **結果顯示** | AI 評分（準確度、流暢度等） | 正確/錯誤 Toast |

### 📸 視覺識別點

#### 一眼就能看出是造句練習：
✅ **有這些元素**:
- 多個可點擊的單字按鈕（Grid 佈局）
- 答案區顯示已選單字（綠色背景）
- 空白提示框（虛線邊框，問號）
- 「請選擇單字」標題
- 嘗試次數計數器

❌ **沒有這些元素**:
- 麥克風圖標
- 錄音按鈕（紅色大按鈕）
- 音訊波形圖
- 錄音時長計時器
- AI 評分結果（準確度、流暢度分數）

---

## 測試檢查清單

### ✅ 寫作模式檢查項目

#### 📋 視覺檢查
- [ ] 進度條顯示「第 X 題 / 共 10 題」
- [ ] 藍色題目區顯示例句和中文翻譯
- [ ] 單字資訊區顯示當前單字和翻譯
- [ ] 答案區有空白提示框（虛線邊框）
- [ ] 單字選擇區是 Grid 佈局（2-4 columns）
- [ ] 已選單字有綠色背景和邊框
- [ ] 嘗試次數計數器在底部

#### 🖱️ 互動檢查
- [ ] 點擊正確單字 → 單字移到答案區
- [ ] 點擊錯誤單字 → 顯示紅色 Toast
- [ ] 點擊答案區單字 → 單字回到選擇區
- [ ] 完成題目 → 顯示綠色成功提示
- [ ] 延遲 1.5 秒後自動進入下一題
- [ ] 嘗試次數正確累加

#### 🎯 功能檢查
- [ ] 單字順序必須正確（不能亂選）
- [ ] 每個單字只能選一次
- [ ] 選錯不影響進度（可繼續嘗試）
- [ ] 10 題完成後檢查熟悉度
- [ ] 未達 90% 自動載入下一輪

### ✅ 聽力模式檢查項目

#### 📋 視覺檢查
- [ ] 紫色題目區（不是藍色）
- [ ] **不顯示**例句文字（只有提示）
- [ ] 有「重播音檔」按鈕
- [ ] 顯示 🎧 圖標
- [ ] 其他元素與寫作模式相同

#### 🖱️ 互動檢查
- [ ] 進入題目時自動播放音檔
- [ ] 播放中顯示 Loading 動畫
- [ ] 可以點擊「重播音檔」
- [ ] 其他互動與寫作模式相同

---

## 🐛 常見問題排查

### 問題 1: 看到的是朗讀評測介面
**症狀**:
- 有麥克風圖標
- 有錄音按鈕
- 沒有單字選擇按鈕

**可能原因**:
1. Content type 不是 `SENTENCE_MAKING`
2. 前端路由沒有正確判斷
3. 瀏覽器快取

**解決方法**:
```bash
# 1. 檢查作業類型
SELECT c.type FROM contents c
JOIN assignment_contents ac ON ac.content_id = c.id
WHERE ac.assignment_id = [你的作業ID];

# 2. 強制刷新瀏覽器（Ctrl+Shift+R 或 Cmd+Shift+R）

# 3. 清除瀏覽器快取
```

### 問題 2: API 404 錯誤
**症狀**: Console 顯示 `GET /api/students/assignments/X/practice-words 404`

**可能原因**: 後端 uvicorn 沒有重新載入

**解決方法**:
```bash
# 重啟後端
cd backend
pkill -f uvicorn
python -m uvicorn main:app --reload --port 8080
```

### 問題 3: 沒有單字顯示
**症狀**: 畫面空白或顯示「沒有需要練習的單字」

**可能原因**: Content 沒有 content_items

**解決方法**:
```bash
# 檢查 content_items
SELECT COUNT(*) FROM content_items
WHERE content_id = [你的 content ID];
```

---

## 📸 截圖對照

### 寫作模式正確畫面
應該看到：
1. ✅ 藍色題目區
2. ✅ 例句文字清晰可見
3. ✅ 4x2 Grid 單字按鈕
4. ✅ 綠色答案框

### 聽力模式正確畫面
應該看到：
1. ✅ 紫色題目區
2. ✅ 沒有例句文字
3. ✅ 重播音檔按鈕
4. ✅ 自動播放提示

### ❌ 錯誤畫面（朗讀評測）
如果看到：
1. ❌ 紅色錄音按鈕
2. ❌ 麥克風圖標
3. ❌ 音訊波形
4. ❌ 計時器

→ **代表路由錯誤，沒有進入造句練習模式**

---

**文件版本**: v1.0
**最後更新**: 2025-11-21
**狀態**: 待測試驗證
