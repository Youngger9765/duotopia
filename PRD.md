# Duotopia 產品需求文件 (PRD) v2.0

## 一、產品概述

### 1.1 產品定位
Duotopia 是一個以 AI 驅動的多元智能英語學習平台，專為國小到國中學生（6-15歲）設計。透過語音辨識、即時回饋和遊戲化學習，幫助學生提升英語口說能力。系統涵蓋完整的教學管理功能，讓教師能有效管理班級、派發作業並追蹤學習成效。

### 1.2 核心價值
- **個人化學習**：為每位學生設定專屬的學習目標（WPM、準確率）
- **多元練習模式**：支援朗讀、口說、聽力、造句等六種活動類型
- **AI 智能評分**：提供即時、客觀的語音評估和建議
- **完整教學管理**：從班級管理到作業批改的一站式解決方案

### 1.3 目標用戶
- **主要用戶**：國小到國中英語教師
- **次要用戶**：6-15歲學生
- **重要用戶**：教育機構管理者
- **潛在用戶**：家長

## 二、系統架構

### 2.1 技術架構
- **前端框架**：React 18 + Vite + TypeScript
- **UI 設計**：Tailwind CSS + shadcn/ui
- **動畫效果**：Framer Motion
- **後端服務**：Base44 BaaS 平台
- **資料管理**：Base44 Entities 系統
- **即時通訊**：WebSocket（規劃中）

### 2.2 核心實體模型

#### 使用者相關
- **User**：統一用戶實體（教師使用）
- **ClassStudent**：學生實體
- **TeacherSession**：教師會話管理
- **StudentSession**：學生會話管理

#### 組織架構
- **School**：學校管理
- **Class**：班級
- **ClassStudent**：班級學生關聯
- **ClassTeacher**：班級教師關聯
- **SchoolStudent**：學校學生關聯
- **SchoolTeacher**：學校教師關聯

#### 課程內容
- **Course**：課程
- **Lesson**：課文/單元（包含多個活動）
- **ClassCourseMapping**：班級與課程關聯

#### 作業與評量
- **StudentAssignment**：學生作業
- **AssignmentSubmission**：作業提交
- **ActivityResult**：活動結果記錄

#### 系統功能
- **TeacherNotification**：教師通知
- **StudentProgress**：學生進度追蹤

### 2.3 活動類型架構

系統支援六種核心活動類型：

1. **朗讀評測 (reading_assessment)**
   - 評估指標：WPM（每分鐘字數）、準確率、流暢度、發音
   - 目標設定：可設定個人化 WPM 和準確率目標
   - AI 分析：提供詳細的發音錯誤分析

2. **口說練習 (speaking_practice)**
   - 自由練習模式，無嚴格評分標準
   - 提供示範音檔參考
   - 著重練習次數和改進

3. **情境對話 (speaking_scenario)**
   - 角色扮演式練習
   - 情境化的對話練習
   - 評估對話完整性和適切性

4. **聽力填空 (listening_cloze)**
   - 音檔搭配填空題
   - 支援選擇題或填充題
   - 即時答案檢查

5. **造句練習 (sentence_making)**
   - 指定單字造句
   - 評估語法正確性
   - 提供範例參考

6. **口說測驗 (speaking_quiz)**
   - 正式評量模式
   - 設定及格分數
   - 支援重考機制

## 三、核心功能模組

### 3.1 認證系統

#### 機構管理者認證
- **登入方式**：Google OAuth 2.0
- **權限等級**：最高管理權限
- **功能權限**：
  - 管理機構教師
  - 建立課程模板
  - 查看全機構統計

#### 教師認證
- **登入方式**：Google OAuth 2.0
- **自動註冊**：首次 Google 登入自動建立教師帳號
- **機構加入**：輸入機構代碼成為機構教師
- **權限管理**：自動賦予教師權限

#### 學生認證

**初次登入流程**（5步驟）：
1. **輸入教師 Email**
   - 學生輸入所屬班級教師的 Email
   - 系統記錄此教師資訊供未來快速選擇

2. **選擇班級**
   - 顯示該教師所有班級
   - 學生選擇自己所屬班級

3. **選擇姓名並輸入密碼**
   - 從班級學生名單中選擇自己
   - 輸入密碼（預設為生日：YYYYMMDD 格式）

4. **填寫家長聯絡資訊**
   - 必填家長 Email 和電話
   - 一個家長 Email 最多可綁定 5 位學生
   - 用於成績通知和緊急聯絡

5. **驗證家長 Email**
   - 系統發送驗證信
   - 完成驗證後即可開始使用

**非初次登入流程**（3步驟）：
1. 選擇或輸入教師 Email（系統會顯示歷史記錄）
2. 選擇班級
3. 選擇姓名並輸入密碼
4. 直接進入作業列表頁面

### 3.2 教師端功能

#### 教師完整使用路徑

**步驟 1：教師登入**
- 使用 Google 帳號登入
- 首次登入自動建立教師帳號
- 機構教師需輸入機構代碼

**步驟 2：新增學生**
- 必填資料：
  - 學生姓名
  - 生日（用作預設密碼）
- 選填資料：
  - 學號
- 系統自動生成：
  - 學生 Email
  - 預設密碼（生日 YYYYMMDD）

**步驟 3：建立班級**
- 班級程度選擇：preA, A1, A2, B1, B2, C1, C2
- 班級名稱設定
- 班級描述（選填）

**步驟 4：學生加入班級**
- Checkbox 多選學生
- 批量加入班級
- 可跨班級管理學生

**步驟 5：建立或選擇課程**
- **錄音集課程**：
  - 標題（必填）
  - 文本 3-15 句（必填）
  - 文本翻譯或說明
  - 級數：preA, A1, A2, B1, B2, C1, C2
  
- **口說集課程**：
  - 標題（必填）
  - 時間設定
  - 地點設定
  - 情境描述
  - AI 角色設定
  - 級數：preA, A1, A2, B1, B2, C1, C2

**步驟 6：作業派發**
- 搜尋功能：
  - 按學生名搜尋（例：kaddy）
  - 按班級搜尋（例：705）
- 選擇對象：
  - 整班派發（705-All）
  - 個別學生（705-kaddy）
  - 多重選擇
- 時間設定：
  - 預約派發時間
  - 繳交期限設定

#### 3.2.1 教師儀表板 (TeacherDashboard)

**課程管理**
- 建立新課程：設定名稱、描述、難度等級
- 課文管理：
  - 新增六種不同類型的活動
  - 設定活動參數（目標值、時間限制等）
  - 課文順序調整
  - 封存/取消封存功能
- 課程搜尋與篩選
- 課程複製功能

**朗讀練習（錄音集）建立**
- 支援 3-15 句的單字、片語或句子輸入
- 每個項目包含三個欄位：
  - 文本（必填）：輸入英文單字、片語或句子
  - 翻譯或英翻英：提供中文翻譯或英文解釋
  - 級數（必填）：設定難度等級
- 動態新增/刪除項目功能
- 批次輸入支援（按 Enter 新增下一個項目）
- 音檔圖示標記錄音功能
- 圖片圖示支援視覺輔助
- 刪除按鈕移除單一項目

**快速操作區**
- 快速派發作業
- 查看待批改作業
- 查看班級狀態
- 最新通知提醒

#### 3.2.2 班級管理 (ClassManagement)

**班級操作**
- 建立班級：設定名稱、年級、難度等級
- 班級資訊編輯
- 班級課程關聯：選擇適合的課程內容
- 班級封存管理

**學生管理**
- **單一新增**：
  - 填寫學生姓名、學號、Email、生日
  - 設定個人化學習目標
  - 自動生成登入資訊
  
- **批量匯入**：
  - 支援 CSV 格式（姓名,學號,Email,生日）
  - 自動檢測重複資料
  - Email 格式驗證
  - 匯入預覽與錯誤提示
  - 衝突處理選項（跳過/更新/保留）

- **學生資料維護**：
  - 編輯個人資訊
  - 調整學習目標
  - 查看學習記錄
  - 停用/啟用帳號

#### 3.2.3 作業派發系統 (AssignHomework)

**五步驟派發流程**：
1. **選擇課程**：從已建立的課程中選擇
2. **選擇課文**：選擇要作為作業的活動
3. **選擇班級**：可多選班級
4. **選擇學生**：
   - 支援全選/取消全選
   - 個別勾選
   - 顯示學生當前作業負擔
5. **設定詳情**：
   - 作業標題（自動帶入）
   - 作業說明（選填）
   - 派發時間（立即/預約）
   - 繳交期限
   - 是否允許遲交

**作業管理功能**
- 查看作業派發記錄
- 修改作業期限
- 撤回未開始的作業
- 複製作業設定

#### 3.2.4 批改系統 (GradingDashboard)

**批改流程**
1. 選擇班級管理
2. 選擇特定班級
3. 顯示班級所有作業（最新作業在上）
4. 選擇某份作業
5. 批改作業或觀看 AI 批改結果

**錄音集作業批改**
- **作業總覽顯示**：
  - 派發日期 / 截止日期
  - 課程-作業標題
  - 作業類型：錄音
  - 繳交人數：X/Y
  - 批改數量：X/Y
  
- **學生列表統計**：
  - 待批改文本數
  - 已訂正文本數
  - 待訂正文本數
  - 待完成文本數
  - 批改完畢文本數

- **批改 Modal 介面**：
  - 頂部資訊：學生名、課程-作業標題、截止日
  - 控制區：
    - 快速播放全部按鈕
    - 重新播放按鈕
    - AI 給評按鈕
    - 手動給評/AI 給評切換
    - 送出按鈕
  - 文本列表：
    - 全選訂正 checkbox
    - 各文本獨立訂正 checkbox
    - 播放控制區
    - 學生前端 AI 評測結果顯示
  - 訂正功能：可將特定文本打回重練

**口說集作業批改**
- **自動批改流程**：
  - 學生完成作業當下，AI 直接批改
  - 記錄 AI 回覆、學生回答、優化建議
  - 自動生成個人化錄音集作業（無需教師手動派發）
  
- **批改介面顯示**：
  - 派發日期 / 截止日期
  - 課程-作業標題
  - 作業類型：口說
  - 繳交人數：X/Y
  - 批改數量：X/Y（通常為自動完成）
  
- **學生詳細檢視**：
  - 搜尋或選擇特定學生
  - 顯示對話過程：
    - AI 回覆內容
    - 學生回答內容
    - 優化學生回答的建議
    - 自動生成的後續練習

#### 3.2.5 統計分析 (Statistics)

**班級整體分析**
- 平均 WPM 趨勢圖
- 準確率分布圖
- 達標率統計
- 活躍度分析

**個人學習報告**
- 學習曲線圖表
- 強弱項分析
- 進步率計算
- 練習頻率統計

**作業完成分析**
- 準時繳交率
- 平均完成時間
- 各類型活動表現
- 改善建議

### 3.3 學生端功能

#### 3.3.1 作業列表 (Assignments)

**作業顯示**
- 依派發時間排序（新到舊）
- 作業卡片顯示：
  - 作業標題
  - 活動類型圖示
  - 截止時間倒數
  - 完成狀態標記
- 無作業時顯示「恭喜你！目前沒有作業」

**作業分類**
- 待完成作業
- 已完成作業
- 已過期作業

#### 3.3.2 練習介面

**通用功能**
- 練習前說明
- 目標值顯示
- 計時器（如有時限）
- 暫停/繼續功能
- 放棄練習確認

**各類型練習特色**
- **朗讀評測**：
  - 錄音介面
  - 即時音量顯示
  - 重錄功能
  - 結果即時顯示
  
- **聽力填空**：
  - 音檔播放控制
  - 填空作答介面
  - 提示功能
  - 答案檢查

- **造句練習**：
  - 目標單字高亮
  - 字數計算
  - 範例參考
  - 語法檢查提示

### 3.4 機構管理者功能

#### 3.4.1 機構設定
- **機構資料管理**：
  - 機構名稱、地址、聯絡資訊
  - 機構代碼生成與管理
  - 機構 Logo 上傳
  - 營業時間設定

#### 3.4.2 教師管理
- **教師邀請流程**：
  1. 發送邀請連結或機構代碼
  2. 教師使用 Google 登入
  3. 輸入機構代碼加入機構
  4. 自動賦予機構教師權限
  
- **教師權限管理**：
  - 查看機構教師名單
  - 設定教師權限等級
  - 停用/啟用教師帳號
  - 查看教師教學統計

#### 3.4.3 課程模板管理
- **建立機構課程模板**：
  - 統一的課程架構
  - 標準化的活動內容
  - 分級制度設定（preA, A1-C2）
  
- **模板共享機制**：
  - 所有機構教師可見
  - 教師可複製模板自用
  - 模板版本控制
  - 使用情況追蹤

### 3.5 學校管理系統 (SchoolManagement)

#### 3.4.1 組織架構管理
- **學校設定**：
  - 學校基本資料
  - 學制設定（國小/國中/高中）
  - 學期管理
  - 校徽上傳

- **部門管理**：
  - 科目設定
  - 年級架構
  - 班級命名規則

#### 3.4.2 人員管理
- **教師管理**：
  - 教師名冊維護
  - 授課科目設定
  - 班級分配
  - 權限設定

- **學生管理**：
  - 全校學生名冊
  - 年級升級處理
  - 轉學生管理
  - 畢業生封存

#### 3.4.3 學期作業
- 新學期設定
- 班級重組
- 資料存檔
- 成績單產生

### 3.5 通知系統

#### 3.5.1 教師通知
- **通知類型**：
  - 學生未達標警示
  - 作業完成通知
  - 系統公告
  - 家長訊息

- **通知管理**：
  - 未讀標記
  - 重要度分級
  - 詳細內容查看
  - 批次標記已讀

#### 3.5.2 學生通知（規劃中）
- 新作業通知
- 成績公布通知
- 教師評語通知
- 系統提醒

### 3.6 資料管理功能

#### 3.6.1 匯入匯出
- **支援格式**：
  - CSV（學生資料、成績）
  - Excel（報表匯出）
  - PDF（成績單、報告）

- **匯入驗證**：
  - 格式檢查
  - 必填欄位驗證
  - 資料衝突處理
  - 匯入預覽確認

#### 3.6.2 資料備份
- 自動備份機制
- 手動備份功能
- 資料還原
- 版本管理

## 四、使用者體驗設計

### 4.1 介面設計原則
- **一致性**：統一的操作模式和視覺風格
- **直覺性**：符合使用者心智模型
- **回饋性**：即時的操作回饋
- **容錯性**：友善的錯誤處理

### 4.2 響應式設計
- **桌面版**：完整功能展現
- **平板版**：優化的觸控操作
- **手機版**：簡化的核心功能

### 4.3 無障礙設計
- 鍵盤導航支援
- 螢幕閱讀器相容
- 高對比模式
- 字體大小調整

## 五、系統整合與擴展

### 5.1 第三方整合
- **Google Workspace**：行事曆、雲端硬碟
- **LINE**：訊息通知
- **YouTube**：教學影片嵌入

### 5.2 API 開放（規劃中）
- RESTful API
- Webhook 支援
- 開發者文件
- API 金鑰管理

### 5.3 擴展功能規劃
- **家長端 App**：
  - 查看孩子學習進度
  - 接收成績通知
  - 與教師溝通

- **AI 教學助理**：
  - 自動作業建議
  - 學習路徑規劃
  - 弱點加強建議

- **遊戲化元素**：
  - 成就系統
  - 排行榜
  - 虛擬獎勵

## 六、技術規格與限制

### 6.1 系統需求
- **瀏覽器**：Chrome 90+、Firefox 88+、Safari 14+、Edge 90+
- **網路**：穩定的網路連線（建議 10Mbps 以上）
- **裝置**：支援麥克風的裝置（口說練習必需）

### 6.2 效能指標
- 頁面載入時間：< 2 秒
- API 回應時間：< 200ms
- 音訊處理延遲：< 500ms
- 並發用戶支援：1000+

### 6.3 資料限制
- 單次 CSV 匯入：最多 500 筆
- 錄音長度：最長 5 分鐘
- 檔案大小：最大 50MB
- 班級人數：最多 50 人

### 6.4 安全性要求
- HTTPS 加密傳輸
- 資料隱私保護
- 定期安全更新
- 操作日誌記錄

## 七、專案里程碑

### Phase 1：基礎功能（已完成）
- ✓ 教師/學生認證系統
- ✓ 班級管理功能
- ✓ 基本作業派發
- ✓ 六種活動類型

### Phase 2：進階功能（進行中）
- □ 完整統計報表
- □ 批量操作優化
- □ 通知系統完善
- □ 家長功能

### Phase 3：智能化升級（規劃中）
- □ AI 學習路徑
- □ 自適應練習
- □ 智能批改
- □ 預測分析

## 八、成功指標

### 8.1 技術指標
- 系統可用性：> 99.9%
- 錯誤率：< 0.1%
- 用戶滿意度：> 4.5/5

### 8.2 業務指標
- 教師採用率：> 80%
- 學生活躍率：> 70%
- 作業完成率：> 85%
- 家長參與率：> 60%

### 8.3 學習成效
- 平均 WPM 提升：> 20%
- 準確率提升：> 15%
- 學習動機提升：> 30%

## 九、風險管理

### 9.1 技術風險
- Base44 平台依賴性
- 瀏覽器相容性
- 網路穩定性要求

### 9.2 使用風險
- 教師培訓需求
- 學生適應期
- 家長配合度

### 9.3 營運風險
- 資料安全性
- 系統擴展性
- 成本控制

## 十、結論

Duotopia 致力於打造最適合台灣學生的英語學習平台，透過完整的功能設計、友善的使用介面、以及強大的 AI 技術，協助教師提升教學效率，幫助學生快樂學習。本 PRD 將持續更新，以反映產品發展的最新狀態。

---
*文件版本：2.0*  
*最後更新：2024年1月*  
*下次檢視：2024年4月*