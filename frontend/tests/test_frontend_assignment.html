<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦å‰ç«¯æŒ‡æ´¾åŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
        }
        .btn-success {
            background-color: #10b981;
            color: white;
        }
        .btn-danger {
            background-color: #ef4444;
            color: white;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status-success {
            background-color: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .status-error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
        .status-info {
            background-color: #dbeafe;
            color: #1e40af;
            border: 1px solid #3b82f6;
        }
        .log {
            background-color: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .test-section {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .test-section h3 {
            margin-top: 0;
            color: #374151;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª å‰ç«¯æŒ‡æ´¾åŠŸèƒ½æ¸¬è©¦</h1>

    <div class="test-container">
        <h2>æ¸¬è©¦æ­¥é©Ÿ</h2>
        <div class="status status-info">
            <strong>é‡è¦:</strong> è«‹ç¢ºä¿å‰ç«¯é–‹ç™¼ä¼ºæœå™¨æ­£åœ¨é‹è¡Œ (http://localhost:5173)
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ æ‰‹å‹•æ¸¬è©¦æ¸…å–®</h3>
            <p>è«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ¸¬è©¦æŒ‡æ´¾åŠŸèƒ½ï¼š</p>
            <ol>
                <li>
                    <strong>æ‰“é–‹ä½œæ¥­è©³ç´°é é¢</strong>
                    <button class="btn btn-primary" onclick="openAssignmentPage()">
                        ğŸŒ æ‰“é–‹ä½œæ¥­è©³ç´°é é¢
                    </button>
                </li>
                <li>
                    <strong>æª¢æŸ¥å­¸ç”Ÿåˆ—è¡¨é¡¯ç¤º</strong>
                    <ul>
                        <li>âœ… 12 å€‹å­¸ç”Ÿéƒ½æœ‰é¡¯ç¤º</li>
                        <li>âœ… å·²å®Œæˆå­¸ç”Ÿé¡¯ç¤ºã€Œæ‰¹æ”¹ã€æŒ‰éˆ•</li>
                        <li>âœ… æœªé–‹å§‹/é€²è¡Œä¸­å­¸ç”Ÿé¡¯ç¤ºã€Œå–æ¶ˆæŒ‡æ´¾ã€æŒ‰éˆ•</li>
                    </ul>
                </li>
                <li>
                    <strong>æ¸¬è©¦æŒ‡æ´¾åŠŸèƒ½</strong>
                    <ul>
                        <li>âœ… å‹¾é¸æœªæŒ‡æ´¾çš„å­¸ç”Ÿ</li>
                        <li>âœ… é»æ“Šã€ŒæŒ‡æ´¾ã€æŒ‰éˆ•</li>
                        <li>âœ… ç¢ºèª API è«‹æ±‚æˆåŠŸ (F12 æŸ¥çœ‹ Network)</li>
                        <li>âœ… é é¢é‡æ–°æ•´ç†å¾Œå­¸ç”Ÿä»ç„¶è¢«æŒ‡æ´¾</li>
                    </ul>
                </li>
                <li>
                    <strong>æ¸¬è©¦å–æ¶ˆæŒ‡æ´¾åŠŸèƒ½</strong>
                    <ul>
                        <li>âœ… é»æ“Šå·²æŒ‡æ´¾å­¸ç”Ÿçš„ã€Œå–æ¶ˆæŒ‡æ´¾ã€æŒ‰éˆ•</li>
                        <li>âœ… ç¢ºèª API è«‹æ±‚æˆåŠŸ</li>
                        <li>âœ… å­¸ç”Ÿç‹€æ…‹æ­£ç¢ºæ›´æ–°</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="test-section">
            <h3>ğŸ” æª¢æŸ¥é‡é»</h3>
            <div class="status status-info">
                <strong>API æª¢æŸ¥ (F12 é–‹ç™¼è€…å·¥å…· â†’ Network):</strong>
                <ul>
                    <li>PATCH /api/teachers/assignments/{id} è¿”å› 200 OK</li>
                    <li>è«‹æ±‚ body åŒ…å«æ­£ç¢ºçš„ student_ids (æ•¸å­—é™£åˆ—)</li>
                    <li>response è³‡æ–™çµæ§‹æ­£ç¢º</li>
                </ul>
            </div>

            <div class="status status-info">
                <strong>å‰ç«¯æª¢æŸ¥:</strong>
                <ul>
                    <li>ç„¡ console éŒ¯èª¤</li>
                    <li>æŒ‰éˆ•é¡¯ç¤ºé‚è¼¯æ­£ç¢º</li>
                    <li>ç‹€æ…‹æ›´æ–°å³æ™‚</li>
                    <li>é‡åˆ·å¾Œè³‡æ–™æŒä¹…åŒ–</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š æ¸¬è©¦çµæœè¨˜éŒ„</h3>
            <button class="btn btn-success" onclick="markTestPassed()">âœ… æ¸¬è©¦é€šé</button>
            <button class="btn btn-danger" onclick="markTestFailed()">âŒ æ¸¬è©¦å¤±æ•—</button>
            <div id="test-result" class="status" style="display: none;"></div>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ”§ å¿«é€Ÿæª¢æŸ¥å·¥å…·</h2>

        <div class="test-section">
            <h3>ğŸ“± å‰ç«¯ç‹€æ…‹æª¢æŸ¥</h3>
            <button class="btn btn-primary" onclick="checkFrontendStatus()">æª¢æŸ¥å‰ç«¯é‹è¡Œç‹€æ…‹</button>
            <button class="btn btn-primary" onclick="openDevTools()">æ‰“é–‹é–‹ç™¼è€…å·¥å…·æŒ‡å—</button>
        </div>

        <div class="test-section">
            <h3>ğŸŒ æ¸¬è©¦ç’°å¢ƒ</h3>
            <p><strong>å‰ç«¯:</strong> <a href="http://localhost:5173" target="_blank">http://localhost:5173</a></p>
            <p><strong>API:</strong> https://api.duotopia-staging.com</p>
        </div>
    </div>

    <div class="test-container">
        <h2>ğŸ“ æ¸¬è©¦æ—¥èªŒ</h2>
        <div id="log" class="log">æº–å‚™é–‹å§‹æ¸¬è©¦...\n</div>
        <button class="btn btn-primary" onclick="clearLog()">æ¸…é™¤æ—¥èªŒ</button>
    </div>

    <script>
        let logElement = document.getElementById('log');

        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logElement.textContent += `[${timestamp}] ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            logElement.textContent = 'æ—¥èªŒå·²æ¸…é™¤...\n';
        }

        function openAssignmentPage() {
            log('ğŸŒ æ­£åœ¨æ‰“é–‹ä½œæ¥­è©³ç´°é é¢...');

            // é€™è£¡éœ€è¦çŸ¥é“å…·é«”çš„ä½œæ¥­ IDï¼Œå¯èƒ½éœ€è¦å…ˆç™»å…¥å–å¾—
            const assignmentUrl = 'http://localhost:5173/';  // å…ˆæ‰“é–‹é¦–é 
            window.open(assignmentUrl, '_blank');

            log('âœ… å·²åœ¨æ–°åˆ†é æ‰“é–‹å‰ç«¯é é¢');
            log('ğŸ“‹ è«‹æ‰‹å‹•å°èˆªåˆ°ä½œæ¥­è©³ç´°é é¢é€²è¡Œæ¸¬è©¦');
        }

        function checkFrontendStatus() {
            log('ğŸ” æª¢æŸ¥å‰ç«¯é‹è¡Œç‹€æ…‹...');

            fetch('http://localhost:5173/')
                .then(response => {
                    if (response.ok) {
                        log('âœ… å‰ç«¯é–‹ç™¼ä¼ºæœå™¨é‹è¡Œæ­£å¸¸');
                    } else {
                        log('âŒ å‰ç«¯é–‹ç™¼ä¼ºæœå™¨å›æ‡‰ç•°å¸¸');
                    }
                })
                .catch(error => {
                    log('âŒ å‰ç«¯é–‹ç™¼ä¼ºæœå™¨ç„¡æ³•é€£ç·š - è«‹ç¢ºèª npm run dev æ˜¯å¦é‹è¡Œ');
                    log(`éŒ¯èª¤è©³æƒ…: ${error.message}`);
                });
        }

        function openDevTools() {
            log('ğŸ”§ é–‹ç™¼è€…å·¥å…·ä½¿ç”¨æŒ‡å—:');
            log('1. åœ¨ä½œæ¥­é é¢æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·');
            log('2. åˆ‡æ›åˆ° Network æ¨™ç±¤');
            log('3. åŸ·è¡ŒæŒ‡æ´¾æ“ä½œæ™‚è§€å¯Ÿ API è«‹æ±‚');
            log('4. åˆ‡æ›åˆ° Console æ¨™ç±¤æª¢æŸ¥æ˜¯å¦æœ‰éŒ¯èª¤');

            alert('è«‹åœ¨ä½œæ¥­é é¢æŒ‰ F12 æ‰“é–‹é–‹ç™¼è€…å·¥å…·ï¼ŒæŸ¥çœ‹ Network å’Œ Console æ¨™ç±¤');
        }

        function markTestPassed() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.className = 'status status-success';
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<strong>âœ… æ¸¬è©¦é€šéï¼</strong> æŒ‡æ´¾åŠŸèƒ½æ­£å¸¸é‹ä½œä¸”è³‡æ–™èƒ½æ­£ç¢ºæŒä¹…åŒ–';

            log('ğŸ‰ æ¸¬è©¦æ¨™è¨˜ç‚ºé€šé');

            // ç”Ÿæˆæ¸¬è©¦å ±å‘Š
            generateTestReport(true);
        }

        function markTestFailed() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.className = 'status status-error';
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<strong>âŒ æ¸¬è©¦å¤±æ•—ï¼</strong> è«‹æª¢æŸ¥æ§åˆ¶å°éŒ¯èª¤ä¸¦é‡æ–°æ¸¬è©¦';

            log('ğŸ’¥ æ¸¬è©¦æ¨™è¨˜ç‚ºå¤±æ•—');

            // ç”Ÿæˆæ¸¬è©¦å ±å‘Š
            generateTestReport(false);
        }

        function generateTestReport(passed) {
            const timestamp = new Date().toISOString();
            const status = passed ? 'PASSED' : 'FAILED';

            log('ğŸ“Š ç”Ÿæˆæ¸¬è©¦å ±å‘Š:');
            log(`   æ™‚é–“: ${timestamp}`);
            log(`   ç‹€æ…‹: ${status}`);
            log(`   ä¿®å¾©é …ç›®: æŒ‡æ´¾åŠŸèƒ½æŒä¹…åŒ–å•é¡Œ`);
            log(`   æ¸¬è©¦ç¯„åœ: å‰ç«¯æŒ‡æ´¾/å–æ¶ˆæŒ‡æ´¾æ“ä½œ`);

            if (passed) {
                log('ğŸ¯ æ‰€æœ‰åŠŸèƒ½é©—è­‰å®Œæˆï¼Œå¯ä»¥å®‰å…¨æäº¤è®Šæ›´');
            } else {
                log('âš ï¸  éœ€è¦é€²ä¸€æ­¥èª¿æŸ¥å•é¡Œä¸¦ä¿®å¾©');
            }
        }

        // åˆå§‹åŒ–
        window.addEventListener('load', function() {
            log('ğŸš€ æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ');
            log('ğŸ“‹ è«‹æŒ‰ç…§ä¸Šæ–¹æ­¥é©Ÿé€²è¡Œæ‰‹å‹•æ¸¬è©¦');

            // è‡ªå‹•æª¢æŸ¥å‰ç«¯ç‹€æ…‹
            setTimeout(checkFrontendStatus, 1000);
        });
    </script>
</body>
</html>
