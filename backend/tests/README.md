# æ¸¬è©¦æ–‡ä»¶çµ„ç¹”çµæ§‹

## ğŸ“ æ¸¬è©¦ç›®éŒ„çµæ§‹

```
tests/
â”œâ”€â”€ README.md                     # æ¸¬è©¦èªªæ˜æ–‡ä»¶ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ conftest.py                   # pytest å…±ç”¨é…ç½®
â”‚
â”œâ”€â”€ unit/                         # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ test_auth.py             # èªè­‰åŠŸèƒ½æ¸¬è©¦
â”‚   â”œâ”€â”€ test_models.py           # è³‡æ–™æ¨¡å‹æ¸¬è©¦
â”‚   â”œâ”€â”€ test_schemas.py          # Pydantic schemas æ¸¬è©¦
â”‚   â””â”€â”€ test_utils.py            # å·¥å…·å‡½æ•¸æ¸¬è©¦
â”‚
â”œâ”€â”€ integration/                  # æ•´åˆæ¸¬è©¦ï¼ˆAPIæ¸¬è©¦ï¼‰
â”‚   â”œâ”€â”€ test_auth_api.py         # èªè­‰ API æ¸¬è©¦
â”‚   â”œâ”€â”€ test_student_api.py      # å­¸ç”Ÿç›¸é—œ API æ¸¬è©¦
â”‚   â”œâ”€â”€ test_teacher_api.py      # æ•™å¸«ç›¸é—œ API æ¸¬è©¦
â”‚   â”œâ”€â”€ test_classroom_api.py    # æ•™å®¤ç›¸é—œ API æ¸¬è©¦
â”‚   â””â”€â”€ test_student_password_change.py  # å­¸ç”Ÿå¯†ç¢¼ä¿®æ”¹ API æ¸¬è©¦
â”‚
â”œâ”€â”€ e2e/                         # ç«¯åˆ°ç«¯æ¸¬è©¦
â”‚   â”œâ”€â”€ conftest.py              # E2E æ¸¬è©¦é…ç½®
â”‚   â”œâ”€â”€ run_tests.sh             # E2E æ¸¬è©¦åŸ·è¡Œè…³æœ¬
â”‚   â”œâ”€â”€ test_complete_flows.py   # å®Œæ•´æ¥­å‹™æµç¨‹æ¸¬è©¦
â”‚   â””â”€â”€ [å…¶ä»–ç¾æœ‰çš„ E2E æ¸¬è©¦]
â”‚
â””â”€â”€ fixtures/                    # æ¸¬è©¦æ•¸æ“šå’Œå¤¾å…·
    â”œâ”€â”€ sample_data.py           # æ¸¬è©¦ç”¨çš„ç¤ºä¾‹æ•¸æ“š
    â””â”€â”€ test_db.py               # æ¸¬è©¦æ•¸æ“šåº«è¨­ç½®
```

## ğŸ¯ æ¸¬è©¦åˆ†é¡åŸå‰‡

### å–®å…ƒæ¸¬è©¦ (unit/)
- æ¸¬è©¦å–®å€‹å‡½æ•¸æˆ–é¡åˆ¥
- ä¸ä¾è³´å¤–éƒ¨ç³»çµ±ï¼ˆè³‡æ–™åº«ã€APIï¼‰
- åŸ·è¡Œå¿«é€Ÿï¼Œè¦†è“‹ç‡é«˜
- æª”åæ ¼å¼ï¼š`test_[æ¨¡çµ„å].py`

### æ•´åˆæ¸¬è©¦ (integration/)
- æ¸¬è©¦ API ç«¯é»
- æ¶‰åŠè³‡æ–™åº«æ“ä½œ
- æ¸¬è©¦ä¸åŒæ¨¡çµ„é–“çš„å”ä½œ
- æª”åæ ¼å¼ï¼š`test_[åŠŸèƒ½å]_api.py`

### ç«¯åˆ°ç«¯æ¸¬è©¦ (e2e/)
- æ¸¬è©¦å®Œæ•´çš„ç”¨æˆ¶æµç¨‹
- æ¶‰åŠå‰å¾Œç«¯äº¤äº’
- åŸ·è¡Œè¼ƒæ…¢ï¼Œä½†æœ€æ¥è¿‘çœŸå¯¦ä½¿ç”¨
- æª”åæ ¼å¼ï¼š`test_[æµç¨‹å].py`

## ğŸ”§ åŸ·è¡Œæ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
pytest

# åŸ·è¡Œç‰¹å®šåˆ†é¡çš„æ¸¬è©¦
pytest tests/unit/              # åƒ…åŸ·è¡Œå–®å…ƒæ¸¬è©¦
pytest tests/integration/      # åƒ…åŸ·è¡Œæ•´åˆæ¸¬è©¦
pytest tests/e2e/              # åƒ…åŸ·è¡Œç«¯åˆ°ç«¯æ¸¬è©¦

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦æ–‡ä»¶
pytest tests/integration/test_student_password_change.py

# é¡¯ç¤ºè¦†è“‹ç‡å ±å‘Š
pytest --cov=. tests/
```

## ğŸ“‹ æ¸¬è©¦å‘½åè¦ç¯„

### æ¸¬è©¦æ–‡ä»¶å‘½å
- `test_[åŠŸèƒ½æ¨¡çµ„].py`
- ä¾‹å¦‚ï¼š`test_student_password_change.py`

### æ¸¬è©¦å‡½æ•¸å‘½å
- `test_[æ¸¬è©¦å ´æ™¯]_[é æœŸçµæœ]()`
- ä¾‹å¦‚ï¼š`test_change_password_with_valid_data_should_success()`

### æ¸¬è©¦é¡åˆ¥å‘½å
- `Test[åŠŸèƒ½å]`
- ä¾‹å¦‚ï¼š`TestStudentPasswordChange`

## ğŸš€ æœ€ä½³å¯¦è¸

1. **æ¯å€‹æ¸¬è©¦æ‡‰è©²ç¨ç«‹é‹è¡Œ**ï¼Œä¸ä¾è³´å…¶ä»–æ¸¬è©¦çš„çµæœ
2. **ä½¿ç”¨æœ‰æ„ç¾©çš„æ¸¬è©¦åç¨±**ï¼Œæ¸…æ¥šæè¿°æ¸¬è©¦å…§å®¹
3. **éµå¾ª AAA æ¨¡å¼**ï¼šArrangeï¼ˆæº–å‚™ï¼‰ã€Actï¼ˆåŸ·è¡Œï¼‰ã€Assertï¼ˆé©—è­‰ï¼‰
4. **é©ç•¶ä½¿ç”¨ fixtures**ï¼Œé¿å…é‡è¤‡çš„è¨­ç½®ä»£ç¢¼
5. **æ¸¬è©¦è¦†è“‹æ­£å¸¸å’Œç•°å¸¸æƒ…æ³**
6. **ä¿æŒæ¸¬è©¦ç°¡æ½”**ï¼Œä¸€å€‹æ¸¬è©¦åªé©—è­‰ä¸€å€‹æ¦‚å¿µ

## ğŸ“ æ¸…ç†è¨ˆç•«

ç›®å‰ backend æ ¹ç›®éŒ„ä¸‹æ•£è½çš„æ¸¬è©¦æ–‡ä»¶å°‡æŒ‰ç…§ä»¥ä¸‹åŸå‰‡é‡æ–°çµ„ç¹”ï¼š

- `test_*.py` â†’ ç§»å‹•åˆ°å°æ‡‰çš„åˆ†é¡ç›®éŒ„
- é‡è¤‡æˆ–éæ™‚çš„æ¸¬è©¦æ–‡ä»¶ â†’ åˆªé™¤æˆ–åˆä½µ
- å»ºç«‹çµ±ä¸€çš„æ¸¬è©¦é…ç½®å’Œå·¥å…·å‡½æ•¸