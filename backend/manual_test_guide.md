# 📱 手動測試導航修復 - 完整步驟

## ⚠️ 重要提醒
本次修復解決了以下問題：
1. ✅ 點擊不同活動群組的題目時，不再跳轉到第一題
2. ✅ 修復 "基礎問候語練習" 重複出現問題
3. ✅ AI 評分現在儲存在個別題目而非整個活動

---

## 🎯 測試步驟

### 步驟 1：開啟測試環境
```bash
# 1. 開啟前端（在新終端）
cd frontend
npm run dev

# 2. 開啟後端（在新終端）
cd backend
python main.py
```

### 步驟 2：登入學生帳號
1. 開啟瀏覽器：http://localhost:5174/
2. 使用學生帳號登入：
   - Email: `student1@example.com`
   - Password: `student123`

### 步驟 3：測試導航功能 🧭

#### A. 測試跨活動群組導航
1. 進入任一作業（如 `/student/assignment/365/activity`）
2. 找到有多個活動群組的頁面（如有 3-4 個不同活動）
3. **關鍵測試**：
   - 點擊第一個活動的第 3 題
   - 確認跳到第一個活動的第 3 題 ✅
   - 點擊第二個活動的第 2 題
   - 確認跳到第二個活動的第 2 題（不是第一題）✅
   - 點擊第三個活動的任意題目
   - 確認正確跳轉到該題目 ✅

#### B. 測試題目狀態顯示
1. 在活動頁面查看題目列表
2. 確認每題顯示正確狀態：
   - ⚪ 未開始（灰色）
   - 🔵 進行中（藍色）
   - ✅ 已完成（綠色勾勾）

#### C. 測試錄音上傳
1. 點擊任一題目
2. 點擊錄音按鈕
3. 錄音 3-5 秒
4. 停止錄音
5. 點擊「提交」
6. 確認該題目狀態變為「已完成」✅
7. **重要**：確認只有該題目變為完成，其他題目狀態不變

### 步驟 4：測試 AI 評分顯示 🤖

1. 提交錄音後，等待 AI 評分（約 5-10 秒）
2. 確認評分顯示在正確題目上
3. 切換到其他題目
4. 確認其他題目沒有顯示錯誤的分數

### 步驟 5：測試頁面刷新 🔄

1. 在活動頁面（如第 2 個活動的第 3 題）
2. 按 F5 刷新頁面
3. **確認**：
   - 不會出現 "基礎問候語練習" ✅
   - 保持在同一題目位置 ✅
   - 所有題目狀態正確保留 ✅

### 步驟 6：測試資料完整性 📊

開啟開發者工具（F12），切換到 Network 標籤：

1. 點擊不同題目時，查看 API 請求
2. 確認 `content_item_id` 參數正確
3. 確認回應中的資料對應正確題目

---

## 🎯 驗證清單

請確認以下所有項目：

- [ ] 點擊不同活動群組的題目，正確跳轉到該題目
- [ ] 刷新頁面後，不會出現 "基礎問候語練習"
- [ ] 錄音上傳到正確的題目
- [ ] AI 評分顯示在正確的題目上
- [ ] 題目完成狀態獨立追蹤
- [ ] 導航列顯示正確的活動和題目名稱
- [ ] 沒有 console 錯誤

---

## 🚨 問題回報

如發現問題，請提供：
1. 具體操作步驟
2. 預期結果 vs 實際結果
3. 瀏覽器 Console 錯誤訊息（如有）
4. Network 標籤的 API 請求/回應

---

## 📈 技術細節（供參考）

### 資料庫改進
- 從 JSONB 陣列改為關聯式設計
- 新增 `content_items` 表格（個別題目）
- 新增 `student_item_progress` 表格（個別進度追蹤）

### API 改進
- 修復 hardcoded `content_id = 1` 問題
- 支援個別題目的錄音上傳
- AI 評分儲存在個別題目記錄

### 前端改進
- `handleActivitySelect` 現在支援 `subQuestionIndex` 參數
- 修復狀態同步問題
- 改進導航邏輯

---

**測試愉快！🎉**
