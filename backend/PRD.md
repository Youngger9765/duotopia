# Duotopia 平台產品需求文件 (PRD)

## 1. 概述

Duotopia 是一個全方位的教育管理平台，支援學校、教師和學生的教學活動管理。平台提供班級管理、課程設計、活動建立、作業分配和成績追蹤等功能。

## 2. 現有功能模組

### 2.1 教師端功能 (Teacher Portal)

#### 已實作 API
- **個人資料管理** (`GET /profile`): 查看教師個人資訊
- **儀表板** (`GET /dashboard`): 教師總覽資料，包含班級、課程統計
- **班級管理**:
  - 建立班級 (`POST /classes`)
  - 查看班級列表 (`GET /classes`)
  - 新增學生到班級 (`POST /classes/{class_id}/students`)
- **課程管理**:
  - 建立課程 (`POST /courses`)
  - 查看課程列表 (`GET /courses`)
  - 查看課程詳情 (`GET /courses/{course_id}`)
  - 建立課程活動 (`POST /courses/{course_id}/lessons`)
- **作業管理**:
  - 建立作業 (`POST /assignments`)

### 2.2 管理端功能 (Admin Portal)

- **學校管理**: 新增、編輯、刪除學校資料
- **教職員管理**: 管理教師和職員帳號
- **學生管理**: 學生資料維護、班級分配
- **系統設定**: 平台層級的設定管理

### 2.3 學生端功能 (Student Portal)

- **課程瀏覽**: 查看已加入的課程
- **作業提交**: 完成並提交作業
- **成績查詢**: 查看個人成績記錄
- **學習進度**: 追蹤學習狀況

## 3. 活動系統架構

### 3.1 核心概念

- **班級 (Class)** → **課程 (Course)** → **活動 (Activity)**
- 每個活動可以是不同類型，具有特定的內容結構和評分邏輯
- 活動系統需要支援現有和未來的各種活動形式

### 3.2 活動類型

#### 現有活動類型
- 聽力克漏字 (Listening Cloze)
- 口說錄音 (Speaking Record)
- 閱讀理解 (Reading Comprehension)
- 寫作任務 (Writing Task)
- 混合題組 (Mixed Question Set)

#### 設計原則
- 可擴展性：輕鬆新增新活動類型
- 統一介面：所有活動共享基礎結構
- 靈活配置：每種活動有專屬配置格式

## 4. 資料模型設計

### 4.1 活動主表 (Activities)

儲存所有活動的基本資訊：
- 基本資訊：標題、描述、類型
- 配置資料：JSON 格式儲存活動特定配置
- 設定選項：時間限制、重試次數、計分方式
- 狀態管理：草稿、已發布、已歸檔
- 時間控制：開始時間、截止時間

### 4.2 活動內容表 (Activity Contents)

儲存活動的具體內容：
- 內容類型：題目、音檔、影片、文字、圖片
- 順序控制：支援多個內容項目的排序
- 內容資料：JSON 格式儲存不同類型的內容

### 4.3 學生提交表 (Student Submissions)

記錄學生的作答資料：
- 提交資料：答案、錄音檔案路徑等
- 評分資料：分數、滿分、詳細回饋
- 狀態追蹤：進行中、已提交、已評分
- 時間記錄：開始時間、提交時間、評分時間

## 5. 活動處理架構

### 5.1 策略模式設計

每種活動類型有對應的處理器：
- 配置驗證：確保活動配置正確
- 提交處理：處理學生答案
- 分數計算：根據活動規則計算成績
- 回饋生成：產生詳細的評分回饋

### 5.2 工廠模式

活動處理器工廠根據活動類型返回對應的處理器，實現動態處理邏輯。

## 6. 前端架構

### 6.1 動態渲染系統

- 活動渲染器：根據活動類型動態載入對應元件
- 統一介面：所有活動元件實作相同的介面
- 狀態管理：統一管理作答進度和提交狀態

### 6.2 元件化設計

每種活動類型對應一個專門的 React 元件，包含：
- 活動呈現邏輯
- 使用者互動處理
- 資料收集和驗證
- 提交前預覽

## 7. API 設計

### 7.1 活動管理 API

- 建立活動：驗證配置並儲存
- 更新活動：修改活動資訊和配置
- 刪除活動：軟刪除或歸檔
- 發布活動：更改活動狀態

### 7.2 學生作答 API

- 開始活動：記錄開始時間
- 儲存進度：自動儲存作答進度
- 提交答案：處理並評分
- 查看結果：獲取評分和回饋

## 8. 擴展性考量

### 8.1 新增活動類型流程

1. 定義活動配置結構
2. 實作對應的處理器
3. 開發前端展示元件
4. 註冊到系統中

### 8.2 版本管理

- 活動配置包含版本資訊
- 支援舊版本活動的相容性
- 提供升級機制

## 9. 成績與報表

### 9.1 成績管理

- 即時評分：自動評分的活動立即顯示成績
- 人工評分：支援教師手動評分和批註
- 成績統計：班級、個人的成績分析

### 9.2 報表功能

- 活動完成率
- 平均分數統計
- 常錯題分析
- 學習進度追蹤

## 10. 未來擴展方向

### 10.1 AI 輔助功能

- 智慧評分：AI 輔助作文評分
- 發音評估：口說活動的自動評分
- 個人化推薦：根據學習狀況推薦活動

### 10.2 協作功能

- 小組活動：支援多人協作完成
- 同儕互評：學生互相評分和回饋
- 即時互動：線上即時答題競賽

## 11. 技術優勢

1. **高擴展性**：新活動類型易於添加
2. **資料彈性**：JSON 結構適應各種需求
3. **統一管理**：所有活動共用基礎架構
4. **關注分離**：內容、邏輯、展示分離
5. **版本控制**：支援活動格式演進

## 12. 實施階段

### Phase 1：基礎架構
- 建立資料模型
- 實作核心 API
- 開發活動渲染框架

### Phase 2：基本活動類型
- 實作 3-5 種常用活動類型
- 建立對應的前端元件
- 測試和優化

### Phase 3：進階功能
- 加入 AI 評分功能
- 開發報表系統
- 實作協作功能