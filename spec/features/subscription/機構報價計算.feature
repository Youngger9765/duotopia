# language: zh-TW
功能: 機構報價計算
  作為 Duotopia 專案擁有人
  我希望能使用機構專用報價計算機
  以便快速為詢價機構提供準確的報價，並突顯兩年約的優勢

  背景:
    假設 我是 Duotopia 專案擁有人
    而且 報價計算機已啟用
    而且 點數單價為 "0.0015" TWD

  規則: 計算預估年度點數
    
    場景: 使用預設參數計算年度點數
      假設 機構有 "50" 位學生
      而且 每位學生每週練習次數預設為 "3" 次
      而且 每次練習句數預設為 "15" 句
      當 我使用報價計算機計算預估年度點數
      那麼 預估年度點數應為 "117000" 點
      # 計算: 50 × 3 × 15 × 52 = 117,000
    
    場景: 使用自訂參數計算年度點數
      假設 機構有 "100" 位學生
      而且 每位學生每週練習次數設為 "5" 次
      而且 每次練習句數設為 "20" 句
      當 我使用報價計算機計算預估年度點數
      那麼 預估年度點數應為 "520000" 點
      # 計算: 100 × 5 × 20 × 52 = 520,000
  
  規則: 計算贈送教師名額
    
    場景: 計算贈送名額（無小數）
      假設 機構有 "10" 位英文老師
      當 我使用報價計算機計算贈送教師名額
      那麼 贈送教師名額應為 "1" 位
      # 計算: 10 × 10% = 1，無條件進位 = 1
      而且 總授權容量應為 "11" 位
      # 計算: 10 + 1 = 11
    
    場景: 計算贈送名額（有小數需進位）
      假設 機構有 "15" 位英文老師
      當 我使用報價計算機計算贈送教師名額
      那麼 贈送教師名額應為 "2" 位
      # 計算: 15 × 10% = 1.5，無條件進位 = 2
      而且 總授權容量應為 "17" 位
      # 計算: 15 + 2 = 17
    
    場景: 計算贈送名額（極小數需進位）
      假設 機構有 "7" 位英文老師
      當 我使用報價計算機計算贈送教師名額
      那麼 贈送教師名額應為 "1" 位
      # 計算: 7 × 10% = 0.7，無條件進位 = 1
      而且 總授權容量應為 "8" 位
      # 計算: 7 + 1 = 8
  
  規則: 計算一年約報價
    
    場景: 計算一年約完整報價
      假設 機構有 "50" 位學生
      而且 每位學生每週練習次數為 "3" 次
      而且 每次練習句數為 "15" 句
      而且 機構有 "10" 位英文老師
      而且 一年約教師月費為 "10.0" USD
      當 我使用報價計算機計算一年約報價
      那麼 一年約預估點數應為 "117000" 點
      # 計算: 50 × 3 × 15 × 52 = 117,000
      而且 一年約點數費用應為 "175.50" TWD
      # 計算: 117,000 × 0.0015 = 175.5
      而且 一年約購買教師數應為 "10" 位
      而且 一年約贈送教師名額應為 "1" 位
      # 計算: 10 × 10% = 1
      而且 一年約總授權容量應為 "11" 位
      # 計算: 10 + 1 = 11
      而且 一年約教師授權費用應為 "1200.00" USD
      # 計算: 10 × 10.0 × 12 = 1,200
      而且 一年約合約總價應包含 "175.50" TWD 點數費用
      而且 一年約合約總價應包含 "1200.00" USD 教師授權費用
  
  規則: 計算兩年約報價
    
    場景: 計算兩年約完整報價
      假設 機構有 "50" 位學生
      而且 每位學生每週練習次數為 "3" 次
      而且 每次練習句數為 "15" 句
      而且 機構有 "10" 位英文老師
      而且 兩年約教師月費為 "9.0" USD
      當 我使用報價計算機計算兩年約報價
      那麼 兩年約預估點數應為 "234000" 點
      # 計算: 117,000 × 2 = 234,000
      而且 兩年約點數費用應為 "351.00" TWD
      # 計算: 117,000 × 2 × 0.0015 = 351.0
      而且 兩年約購買教師數應為 "10" 位
      而且 兩年約贈送教師名額應為 "1" 位
      # 計算: 10 × 10% = 1
      而且 兩年約總授權容量應為 "11" 位
      # 計算: 10 + 1 = 11
      而且 兩年約教師授權費用應為 "2160.00" USD
      # 計算: 10 × 9.0 × 24 = 2,160
      而且 兩年約合約總價應包含 "351.00" TWD 點數費用
      而且 兩年約合約總價應包含 "2160.00" USD 教師授權費用
  
  規則: 計算節省金額與百分比
    
    場景: 計算兩年約節省金額（繁體中文顯示）
      假設 系統語言為 "繁體中文"
      而且 一年約合約總價為 "175.50" TWD 點數費用和 "1200.00" USD 教師授權費用
      而且 兩年約合約總價為 "351.00" TWD 點數費用和 "2160.00" USD 教師授權費用
      而且 當日 USD 對 TWD 匯率為 "31.0"
      當 我使用報價計算機計算節省金額
      那麼 一年約合約總價應顯示為 "37375.50" TWD
      # 計算: 175.50 + (1200.00 × 31.0) = 175.5 + 37,200 = 37,375.5
      而且 兩年約合約總價應顯示為 "67311.00" TWD
      # 計算: 351.00 + (2160.00 × 31.0) = 351.0 + 66,960 = 67,311
      而且 節省金額應為 "7440.00" TWD
      # 計算: (37,375.5 × 2) - 67,311 = 74,751 - 67,311 = 7,440
      而且 節省百分比應為 "9.95" %
      # 計算: 7,440 / 74,751 × 100% ≈ 9.95%
      而且 應顯示提示訊息 "選擇兩年約可省 7440.00 TWD (9.95%)"
    
    場景: 計算兩年約節省金額（英文顯示）
      假設 系統語言為 "英文"
      而且 一年約合約總價為 "175.50" TWD 點數費用和 "1200.00" USD 教師授權費用
      而且 兩年約合約總價為 "351.00" TWD 點數費用和 "2160.00" USD 教師授權費用
      而且 當日 TWD 對 USD 匯率為 "0.0323"
      當 我使用報價計算機計算節省金額
      那麼 一年約合約總價應顯示為 "1205.67" USD
      # 計算: (175.50 × 0.0323) + 1200.00 = 5.67 + 1,200 = 1,205.67
      而且 兩年約合約總價應顯示為 "2171.34" USD
      # 計算: (351.00 × 0.0323) + 2160.00 = 11.34 + 2,160 = 2,171.34
      而且 節省金額應為 "240.00" USD
      # 計算: (1,205.67 × 2) - 2,171.34 = 2,411.34 - 2,171.34 = 240
      而且 節省百分比應為 "9.95" %
      # 計算: 240 / 2,411.34 × 100% ≈ 9.95%
      而且 應顯示提示訊息 "Save 240.00 USD (9.95%) with 2-year plan"
  
  規則: 儲存報價單並產生分享連結
    
    場景: 成功儲存報價單
      假設 機構已完成報價計算
      而且 一年約合約總價為 "37375.50" TWD
      而且 兩年約合約總價為 "67311.00" TWD
      而且 機構填寫聯絡資訊如下
        | 欄位       | 值                      |
        | 機構名稱   | 台北市立國中            |
        | 聯絡人姓名 | 王小明                  |
        | Email      | contact@school.edu.tw   |
        | 電話       | 02-12345678             |
      當 我點擊 "儲存報價單" 按鈕
      那麼 系統應儲存報價單至資料庫
      而且 系統應產生唯一分享連結
      而且 系統應記錄聯絡資訊供後續主動聯絡
      而且 系統應顯示分享連結
      而且 分享連結應包含一年約與兩年約的完整報價
    
    場景: 儲存報價單時未填寫必填欄位
      假設 機構已完成報價計算
      而且 機構未填寫 "Email"
      當 我點擊 "儲存報價單" 按鈕
      那麼 系統應顯示錯誤訊息 "請填寫 Email"
      而且 系統應不儲存報價單
      而且 系統應不產生分享連結
  
  規則: 報價結果顯示
    
    場景: 用戶查看報價計算結果
      假設 機構已完成參數設定
      而且 系統已計算一年約與兩年約報價
      當 報價計算完成
      那麼 頁面應同時顯示一年約與兩年約的報價方案
      而且 每個報價方案應包含以下資訊
        | 資訊項目         |
        | 合約期限         |
        | 預估點數         |
        | 點數費用         |
        | 購買教師授權數   |
        | 贈送教師名額     |
        | 總授權容量       |
        | 教師授權費用     |
        | 合約總價         |
      而且 兩個方案應並排呈現便於比較
    
    場景: 顯示兩年約節省提示（繁體中文）
      假設 系統語言為 "繁體中文"
      而且 報價計算完成
      而且 節省金額為 "7440.00" TWD
      而且 節省百分比為 "9.95" %
      當 用戶查看報價結果
      那麼 頁面應顯示節省提示訊息 "選擇兩年約可省 7440.00 TWD (9.95%)"
      而且 節省提示應清晰可見
    
    場景: 顯示兩年約節省提示（英文）
      假設 系統語言為 "英文"
      而且 報價計算完成
      而且 節省金額為 "240.00" USD
      而且 節省百分比為 "9.95" %
      當 用戶查看報價結果
      那麼 頁面應顯示節省提示訊息 "Save 240.00 USD (9.95%) with 2-year plan"
      而且 節省提示應清晰可見
    
    場景: 報價方案包含教師授權彈性說明
      假設 機構有 "10" 位英文老師
      而且 報價計算完成
      當 用戶查看報價結果
      那麼 一年約應顯示 "購買 10 位教師授權，贈送 1 位名額（總容量 11 位）"
      而且 兩年約應顯示 "購買 10 位教師授權，贈送 1 位名額（總容量 11 位）"
      而且 應說明贈送名額的用途為提供彈性
    
    場景: 顯示公立學校額外優惠提醒
      假設 報價計算機已開啟
      當 用戶查看報價計算機
      那麼 頁面下方應顯示公立學校優惠提醒
      而且 提醒訊息應包含 "公立學校享有額外優惠"
      而且 提醒訊息應引導用戶聯絡客服了解詳情
