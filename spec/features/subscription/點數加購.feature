# language: zh-TW
功能: 點數加購
  作為 機構管理人
  我希望能夠加購點數包
  以便在訂閱期間點數不足時補充

  背景:
    假設 機構 "ABC 教育集團" 已有生效中的訂閱
    而且 機構擁有人為 "王小明"
    而且 我以機構擁有人身分登入

  規則: 查看可用點數包方案
    
    場景: 查看點數包方案列表
      當 我查看點數加購方案
      那麼 應顯示 "10k 點數包" 方案
      而且 "10k 點數包" 價格應為 "18" USD
      而且 "10k 點數包" 點數應為 "10000" 點
      而且 應顯示 "50k 點數包" 方案
      而且 "50k 點數包" 價格應為 "85" USD
      而且 "50k 點數包" 點數應為 "50000" 點
  
  規則: 加購 10k 點數包
    
    場景: 成功加購 10k 點數包
      假設 訂閱剩餘點數為 "5000" 點
      當 我選擇加購 "10k 點數包"
      那麼 應建立點數加購記錄
      而且 加購編號應自動生成
      而且 加購點數應為 "10000" 點
      而且 加購價格應為 "18" USD
      而且 加購狀態應為 "待處理"
      而且 付款狀態應為 "待處理"
    
    場景: 加購付款完成後增加點數
      假設 我有一筆 "10k 點數包" 的加購記錄
      而且 訂閱剩餘點數為 "5000" 點
      當 加購付款狀態變更為 "已完成"
      那麼 加購狀態應變更為 "已完成"
      而且 應建立點數交易記錄
      而且 交易類型應為 "加購"
      而且 點數變動量應為 "10000" 點
      而且 交易前餘額應為 "5000" 點
      而且 交易後餘額應為 "15000" 點
      而且 訂閱總點數應增加 "10000" 點
      而且 訂閱剩餘點數應為 "15000" 點
  
  規則: 加購 50k 點數包
    
    場景: 成功加購 50k 點數包
      假設 訂閱剩餘點數為 "1000" 點
      當 我選擇加購 "50k 點數包"
      那麼 應建立點數加購記錄
      而且 加購點數應為 "50000" 點
      而且 加購價格應為 "85" USD
      而且 加購狀態應為 "待處理"
    
    場景: 加購付款完成後增加點數
      假設 我有一筆 "50k 點數包" 的加購記錄
      而且 訂閱剩餘點數為 "1000" 點
      當 加購付款狀態變更為 "已完成"
      那麼 加購狀態應變更為 "已完成"
      而且 應建立點數交易記錄
      而且 交易類型應為 "加購"
      而且 點數變動量應為 "50000" 點
      而且 交易前餘額應為 "1000" 點
      而且 交易後餘額應為 "51000" 點
      而且 訂閱剩餘點數應為 "51000" 點
  
  規則: 加購失敗處理
    
    場景: 加購付款失敗
      假設 我有一筆 "10k 點數包" 的加購記錄
      而且 訂閱剩餘點數為 "5000" 點
      當 加購付款狀態變更為 "失敗"
      那麼 加購狀態應保持 "待處理"
      而且 訂閱剩餘點數應保持 "5000" 點
      而且 不應建立點數交易記錄
