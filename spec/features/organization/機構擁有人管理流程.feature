# language: zh-TW
功能: 機構擁有人管理流程
  作為 機構擁有人
  我希望能夠管理機構的學校、老師、班級、學生和教材
  以便機構能夠正常運作

  背景:
    假設 我是機構 "ABC 教育集團" 的擁有人
    而且 我已完成 Email 驗證並登入
    而且 我在機構管理後台
    而且 機構有 "10" 個教師授權
    而且 機構有 "117000" 點剩餘點數

  規則: 新增學校
    
    場景: 機構擁有人新增第一所學校
      當 我新增學校 "台北分校"
      而且 我設定學校資訊:
        | 欄位     | 值                      |
        | 學校名稱 | 台北分校                |
        | 聯絡電話 | 02-12345678            |
        | 地址     | 台北市中正區某某路123號  |
      那麼 學校應成功建立
      而且 學校應屬於 "ABC 教育集團"
      而且 學校狀態應為 "啟用"
    
    場景: 機構擁有人新增多所學校
      假設 機構已有學校 "台北分校"
      當 我新增學校 "新竹分校"
      而且 我新增學校 "台中分校"
      那麼 機構應有 "3" 所學校
      而且 所有學校應屬於 "ABC 教育集團"
  
  規則: 新增機構教師
    
    場景: 新增已註冊的教師到機構
      假設 教師 "李老師" 已註冊為網站會員 "lee@teacher.com"
      而且 已使用教師授權數為 "0"
      當 我新增教師 "lee@teacher.com" 到機構
      那麼 教師應成功加入機構
      而且 "lee@teacher.com" 應獲得 "teacher" 角色
      而且 已使用教師授權數應為 "1"
      而且 可用教師授權數應為 "9"
    
    場景: 超過教師授權數量限制
      假設 已使用教師授權數為 "10"
      而且 教師 "張老師" 已註冊為網站會員 "chang@teacher.com"
      當 我嘗試新增教師 "chang@teacher.com" 到機構
      那麼 應顯示錯誤訊息 "教師授權數量已達上限"
      而且 教師應無法加入機構
  
  規則: 指派教師給學校
    
    場景: 指派教師到特定學校
      假設 機構有學校 "台北分校"
      而且 機構有教師 "lee@teacher.com"
      當 我指派 "lee@teacher.com" 到 "台北分校"
      那麼 教師應成功指派到學校
      而且 "lee@teacher.com" 應能訪問 "台北分校" 的資料
    
    場景: 指派教師到多所學校
      假設 機構有學校 "台北分校" 和 "新竹分校"
      而且 機構有教師 "lee@teacher.com"
      當 我指派 "lee@teacher.com" 到 "台北分校"
      而且 我指派 "lee@teacher.com" 到 "新竹分校"
      那麼 "lee@teacher.com" 應能訪問 "台北分校" 的資料
      而且 "lee@teacher.com" 應能訪問 "新竹分校" 的資料
  
  規則: 新增班級到學校
    
    場景: 在學校新增班級
      假設 機構有學校 "台北分校"
      而且 教師 "lee@teacher.com" 已指派到 "台北分校"
      當 我在 "台北分校" 新增班級 "一年A班"
      而且 我指派 "lee@teacher.com" 為班級老師
      那麼 班級應成功建立
      而且 班級應屬於 "台北分校"
      而且 "lee@teacher.com" 應為 "一年A班" 的老師
  
  規則: 新增學生到學校
    
    場景: 在學校新增學生
      假設 機構有學校 "台北分校"
      當 我在 "台北分校" 新增學生 "王小明"
      而且 我設定學生資訊:
        | 欄位   | 值            |
        | 姓名   | 王小明        |
        | Email  | student1@test.com |
      那麼 學生應成功建立
      而且 學生應屬於 "台北分校"
    
    場景: 指派學生到班級
      假設 機構有學校 "台北分校"
      而且 "台北分校" 有班級 "一年A班"
      而且 "台北分校" 有學生 "王小明"
      當 我指派 "王小明" 到 "一年A班"
      那麼 學生應成功加入班級
      而且 "王小明" 應出現在 "一年A班" 的學生名單
  
  規則: 新增機構教材
    
    場景: 機構擁有人新增機構教材
      當 我新增機構教材 "ABC 基礎英文"
      而且 我設定教材資訊:
        | 欄位     | 值              |
        | 教材名稱 | ABC 基礎英文    |
        | 描述     | 適合初學者使用  |
      那麼 教材應成功建立
      而且 教材應屬於 "ABC 教育集團"
      而且 所有機構教師應能使用此教材
  
  規則: 機構管理人查看和管理班級
    
    場景: 機構擁有人查看學校班級資料
      假設 機構有學校 "台北分校"
      而且 "台北分校" 有班級 "一年A班"
      而且 "一年A班" 有學生 "王小明"
      而且 "王小明" 有作業待批改
      當 我進入 "台北分校" 的 "一年A班"
      那麼 我應能看到學生名單
      而且 我應能看到 "王小明" 的作業
      而且 我應能批改作業
      而且 我應能查看成績報表
    
    場景: 機構擁有人指派作業給班級
      假設 機構有學校 "台北分校"
      而且 "台北分校" 有班級 "一年A班"
      而且 機構有教材 "ABC 基礎英文"
      當 我進入 "台北分校" 的 "一年A班"
      而且 我指派 "ABC 基礎英文" 作業
      那麼 作業應成功指派
      而且 "一年A班" 的所有學生應收到作業
