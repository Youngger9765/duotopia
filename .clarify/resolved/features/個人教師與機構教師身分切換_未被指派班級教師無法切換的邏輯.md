# 釐清問題

個人教師與機構教師身分切換.feature 中，「未被指派為班級老師的機構教師查看後台」時「應看不到『切換到機構後台』的選項」，但其他規則顯示切換是基於「機構教師」身份，而非「班級老師」身份，邏輯是否矛盾？

# 定位

Feature: 個人教師與機構教師身分切換.feature
規則: 在個人教師後台查看資料
場景: 未被指派為班級老師的機構教師查看後台
Then: "我應看不到『切換到機構後台』的選項"

vs.

規則: 切換到機構教師身分查看機構資料
場景: 機構教師切換到機構後台（已指派班級）

# 決策記錄

**決策日期**：2026年1月7日  
**決策方式**：✅ 已透過 Feature 修正解決，跳過 Autopilot 決策

## Feature 修正說明

Feature 檔案已從「切換後台」架構改為「視圖切換」架構：

### 修正前（舊版）
- 「切換到機構後台」vs「個人教師後台」
- 未被指派班級的教師無法切換
- 邏輯矛盾

### 修正後（新版 - 2026年1月7日）
- 在個人教師後台內使用「視圖切換」
- 「個人視圖」vs「機構視圖 - <學校名稱>」
- 只要加入機構即可切換視圖
- 未被指派班級時顯示提示訊息

## 新 Feature 邏輯

```gherkin
場景: 選擇機構視圖但未被指派班級
  假設 我在個人教師後台
  而且 我已加入機構 "ABC 教育集團"
  而且 我已被指派到 "台北分校"
  但是 我尚未被指派為任何班級的老師
  當 我選擇視圖 "機構視圖 - 台北分校"
  那麼 我應看到提示訊息 "您尚未被指派任何班級"
  而且 我應只看到機構教材
  而且 我不應看到任何班級
  而且 我不應看到任何學生
```

## 問題解決確認

- [x] 原始邏輯矛盾已不存在
- [x] 視圖切換邏輯清晰
- [x] 未被指派班級的情境已明確定義
- [x] 無需額外決策

# 影響範圍

- 不影響資料模型
- 不影響 API 設計
- 影響前端實作（視圖切換 vs 後台切換）

# 優先級

~~High~~ → **已解決**

# 結論

此項目已透過 Feature 檔案修正完成，無需 Autopilot 決策。
