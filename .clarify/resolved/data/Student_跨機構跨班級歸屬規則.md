# 釐清問題

學生跨機構、跨班級的歸屬規則為何？

# 定位

ERM：Student 實體與 Organization, Classroom 的關聯關係設計。

# 多選題

| 選項 | 描述                                               |
| ---- | -------------------------------------------------- |
| A    | 一個學生可屬於多個機構、多個班級，資料完全共享     |
| B    | 一個學生僅可屬於一個機構，但可屬於該機構的多個班級 |
| C    | 一個學生可屬於多個機構，但每個機構需獨立帳號       |
| D    | 一個學生可屬於多個班級，但班級需屬於同一機構       |

# 影響範圍

- Student 實體與 Organization, Classroom 的關聯表設計
- 學生資料隔離規則
- 學生成績與學習記錄的歸屬邏輯
- 跨機構學生的資料訪問權限
- 學生轉校或轉班的處理流程

# 優先級

High

---

# 解決記錄

- **回答**：A - 一個學生可屬於多個機構、多個班級，但各機構資料隔離（需切換情境）
- **更新的規格檔**：docs/specs/user-roles-and-permissions.md
- **變更內容**：在「學生類」章節記錄學生跨機構跨班級的歸屬規則與情境切換機制
- **重要修正**：各機構的學習記錄**完全隔離**，不互相共享（與「資料隔離」規則一致）
- **補充說明**：
  - 學生端需要情境切換機制（下拉選單），例如切換到「機構 A - 王老師 - 英文初級班」或「個人老師 - 李老師 - 英文進階班」
  - 切換情境時，看到的是完全不同的資料集（機構間隔離）
  - 同一機構內不同班級的資料分別顯示（依據當前選擇的班級情境）
