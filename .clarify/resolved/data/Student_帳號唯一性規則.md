# 釐清問題

學生帳號的唯一性規則為何？

# 定位

ERM：Student 實體的主鍵與唯一性約束設計。

# 多選題

| 選項 | 描述                                                    |
| ---- | ------------------------------------------------------- |
| A    | 單一帳號（email/username 全系統唯一，一個學生一個帳號） |
| B    | 每個機構獨立帳號（學生在不同機構有不同帳號）            |
| C    | 每個班級獨立帳號（學生在不同班級有不同帳號）            |
| D    | 混合模式（主帳號 + 機構子帳號）                         |

# 影響範圍

- Student 實體的主鍵設計
- 學生登入驗證邏輯
- 學生資料的去重與合併邏輯
- 跨機構學生的身份識別
- 學生成績與學習記錄的歸屬邏輯

# 優先級

High

---

# 解決記錄

- **回答**：D - 混合模式：有 Email 用 Email，無 Email 用其他方式（兩者至少要有一個）
- **更新的規格檔**：docs/specs/user-roles-and-permissions.md
- **變更內容**：在「學生類 > 帳號建立與身份驗證機制」章節記錄學生登入流程與帳號唯一性規則
- **重要補充**：老師建立的學生登入流程為：輸入老師Email → 選擇班級 → 選擇自己的姓名 → 輸入密碼（預設為生日YYYYMMDD）→ 進入後可更改密碼與綁定Email
